<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#22c55e">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>åŒ—æ±äº¬CO-OP Hub</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind Config with Custom Colors -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            50: '#f0fdf4', 100: '#dcfce7', 200: '#bbf7d0', 300: '#86efac',
                            400: '#4ade80', 500: '#22c55e', 600: '#16a34a', 700: '#15803d',
                            800: '#166534', 900: '#14532d',
                        },
                        reijikai: {
                            50: '#faf5ff', 100: '#f3e8ff', 200: '#e9d5ff',
                            500: '#a855f7', 600: '#9333ea', 700: '#7c3aed',
                        },
                        shokuin: {
                            50: '#eef2ff', 100: '#e0e7ff', 200: '#c7d2fe',
                            500: '#6366f1', 600: '#4f46e5', 700: '#4338ca',
                        },
                        volunteer: {
                            50: '#ecfeff', 100: '#cffafe', 200: '#a5f3fc',
                            500: '#06b6d4', 600: '#0891b2', 700: '#0e7490',
                        },
                        warm: {
                            50: '#fafaf9', 100: '#f5f5f4', 200: '#e7e5e4', 300: '#d6d3d1',
                            400: '#a8a29e', 500: '#78716c', 600: '#57534e', 700: '#44403c',
                            800: '#292524', 900: '#1c1917',
                        },
                    },
                },
            },
        }
    </script>
    
    <style>
        * { -webkit-tap-highlight-color: transparent; }
        
        body {
            font-family: 'Inter', 'Noto Sans JP', sans-serif;
            overscroll-behavior: none;
            background: #fafaf9;
            color: #292524;
        }
        
        /* CSS Variables for Modern Color Scheme */
        :root {
            --gradient-brand: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            --gradient-hero: linear-gradient(135deg, #22c55e 0%, #0891b2 100%);
            --gradient-reijikai: linear-gradient(135deg, #a855f7 0%, #7c3aed 100%);
            --gradient-shokuin: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
            --gradient-volunteer: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
            --shadow-brand: 0 4px 14px 0 rgba(34, 197, 94, 0.25);
            --shadow-reijikai: 0 4px 14px 0 rgba(168, 85, 247, 0.25);
            --shadow-shokuin: 0 4px 14px 0 rgba(99, 102, 241, 0.25);
            --shadow-volunteer: 0 4px 14px 0 rgba(6, 182, 212, 0.25);
        }
        
        /* Views */
        .view { display: none; }
        .view.active { display: block; animation: fadeIn 0.2s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
        
        .app-container { min-height: 100vh; padding-bottom: 80px; }
        
        /* Bottom Navigation - Enhanced */
        .bottom-nav {
            position: fixed; bottom: 0; left: 0; right: 0; height: 70px;
            background: white; border-top: 1px solid #e7e5e4;
            display: flex; justify-content: space-around; align-items: center;
            z-index: 100; padding-bottom: env(safe-area-inset-bottom, 0);
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.05);
        }
        
        .nav-item {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            padding: 8px 12px; min-width: 64px; color: #a8a29e;
            text-decoration: none; transition: color 0.2s; cursor: pointer;
            border: none; background: none; position: relative;
        }
        .nav-item:active { background-color: #f5f5f4; border-radius: 12px; }
        .nav-item.active { color: #16a34a; }
        .nav-item.active::before {
            content: ''; position: absolute; top: 0; left: 50%; transform: translateX(-50%);
            width: 24px; height: 3px; background: var(--gradient-brand); border-radius: 0 0 3px 3px;
        }
        .nav-item svg { width: 24px; height: 24px; margin-bottom: 4px; }
        .nav-item span { font-size: 11px; font-weight: 500; }
        
        .nav-badge {
            position: absolute; top: 2px; right: 8px;
            background: var(--gradient-brand); color: white;
            font-size: 10px; font-weight: 700; min-width: 18px; height: 18px;
            border-radius: 9px; display: flex; align-items: center; justify-content: center;
            padding: 0 5px; box-shadow: 0 2px 6px rgba(34, 197, 94, 0.4); border: 2px solid white;
        }
        
        /* More Menu - Enhanced */
        .more-menu-overlay {
            position: fixed; inset: 0; background: rgba(28, 25, 23, 0.6);
            backdrop-filter: blur(4px); z-index: 200;
            opacity: 0; visibility: hidden; transition: opacity 0.2s, visibility 0.2s;
        }
        .more-menu-overlay.active { opacity: 1; visibility: visible; }
        
        .more-menu {
            position: fixed; bottom: 0; left: 0; right: 0;
            background: white; border-radius: 24px 24px 0 0; z-index: 201;
            transform: translateY(100%); transition: transform 0.3s ease-out;
            max-height: 80vh; overflow-y: auto;
            padding-bottom: env(safe-area-inset-bottom, 20px);
            box-shadow: 0 -10px 40px rgba(0, 0, 0, 0.15);
        }
        .more-menu-overlay.active .more-menu { transform: translateY(0); }
        .more-menu-handle { width: 40px; height: 4px; background: #d6d3d1; border-radius: 2px; margin: 12px auto; }
        
        .more-menu-item {
            display: flex; align-items: center; padding: 16px 20px; margin: 4px 12px;
            color: #44403c; text-decoration: none; border: none; background: none;
            width: calc(100% - 24px); text-align: left; font-size: 16px;
            cursor: pointer; transition: all 0.15s; border-radius: 12px;
        }
        .more-menu-item:hover { background-color: #f5f5f4; }
        .more-menu-item:active { background-color: #e7e5e4; }
        .more-menu-item svg { width: 24px; height: 24px; margin-right: 16px; color: #78716c; }
        .more-menu-divider { height: 1px; background: #e7e5e4; margin: 8px 20px; }
        
        /* Header - Glass Effect */
        .app-header {
            position: sticky; top: 0;
            background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px);
            border-bottom: 1px solid #e7e5e4; z-index: 50; padding: 12px 16px;
        }
        
        /* Cards - Enhanced */
        .card {
            background: white; border-radius: 16px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.07), 0 2px 4px -2px rgba(0, 0, 0, 0.05);
            overflow: hidden; border: 1px solid #f5f5f4;
        }
        .card-interactive { cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; }
        .card-interactive:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.08), 0 4px 6px -4px rgba(0, 0, 0, 0.05);
        }
        .card-interactive:active { transform: scale(0.98); }
        
        /* Role Badges - Enhanced */
        .badge {
            display: inline-flex; align-items: center; padding: 4px 12px;
            font-size: 12px; font-weight: 600; border-radius: 9999px;
        }
        .badge-reijikai { background: #faf5ff; color: #7c3aed; border: 1px solid #e9d5ff; }
        .badge-shokuin { background: #eef2ff; color: #4f46e5; border: 1px solid #c7d2fe; }
        .badge-volunteer { background: #ecfeff; color: #0891b2; border: 1px solid #a5f3fc; }
        
        /* Buttons - Enhanced with Gradients */
        .btn {
            min-height: 48px; padding: 12px 24px; border-radius: 12px;
            font-weight: 600; display: inline-flex; align-items: center; justify-content: center;
            cursor: pointer; transition: all 0.2s; border: none;
        }
        .btn-primary {
            background: var(--gradient-brand); color: white; box-shadow: var(--shadow-brand);
        }
        .btn-primary:hover { box-shadow: 0 6px 20px rgba(34, 197, 94, 0.35); }
        .btn-primary:active { transform: scale(0.98); }
        .btn-secondary { background: #f5f5f4; color: #44403c; }
        .btn-secondary:hover { background: #e7e5e4; }
        .btn-secondary:active { transform: scale(0.98); }
        
        /* Stats Cards - With Accent Stripe */
        .stat-card {
            background: white; border-radius: 16px; padding: 16px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.07);
            border: 1px solid #f5f5f4; position: relative; overflow: hidden;
        }
        .stat-card::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0;
            height: 4px; background: var(--gradient-brand);
        }
        .stat-card.purple::before { background: var(--gradient-reijikai); }
        .stat-card.blue::before { background: var(--gradient-shokuin); }
        .stat-card.teal::before { background: var(--gradient-volunteer); }
        .stat-value { font-size: 28px; font-weight: 700; color: #292524; }
        .stat-label { font-size: 13px; color: #78716c; margin-top: 4px; }
        
        /* Role Selection Cards */
        .role-card-compact {
            border: 2px solid #e7e5e4; border-radius: 14px; padding: 14px 16px;
            cursor: pointer; transition: all 0.2s; background: white;
            display: flex; align-items: center; gap: 12px;
        }
        .role-card-compact:hover { border-color: #d6d3d1; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.07); }
        .role-card-compact:active { transform: scale(0.98); }
        .role-card-compact.selected { border-color: #06b6d4; background: #ecfeff; box-shadow: var(--shadow-volunteer); }
        .role-card-compact[data-role="reijikai"].selected { border-color: #9333ea; background: #faf5ff; box-shadow: var(--shadow-reijikai); }
        .role-card-compact[data-role="shokuin"].selected { border-color: #4f46e5; background: #eef2ff; box-shadow: var(--shadow-shokuin); }
        
        /* Action Cards - With Glow */
        .action-card {
            border-radius: 16px; padding: 20px; color: white;
            cursor: pointer; transition: transform 0.2s, box-shadow 0.2s;
            position: relative; overflow: hidden;
        }
        .action-card::before {
            content: ''; position: absolute; top: -30%; right: -20%;
            width: 120px; height: 120px;
            background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%);
            pointer-events: none;
        }
        .action-card:hover { transform: translateY(-4px); }
        .action-card:active { transform: scale(0.98); }
        .action-card.reijikai { background: var(--gradient-reijikai); box-shadow: var(--shadow-reijikai); }
        .action-card.shokuin { background: var(--gradient-shokuin); box-shadow: var(--shadow-shokuin); }
        .action-card.volunteer { background: var(--gradient-volunteer); box-shadow: var(--shadow-volunteer); }
        .action-card.brand { background: var(--gradient-brand); box-shadow: var(--shadow-brand); }
        
        /* Welcome Card */
        .welcome-card {
            background: var(--gradient-hero); border-radius: 16px; padding: 20px;
            color: white; position: relative; overflow: hidden; box-shadow: var(--shadow-brand);
        }
        .welcome-card::before {
            content: ''; position: absolute; top: -30%; right: -15%;
            width: 150px; height: 150px;
            background: radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%);
            pointer-events: none;
        }
        
        /* Modals - Enhanced */
        .modal-fullscreen {
            position: fixed; inset: 0; background: #fafaf9; z-index: 300;
            transform: translateX(100%); transition: transform 0.3s ease-out; overflow-y: auto;
        }
        .modal-fullscreen.active { transform: translateX(0); }
        
        .modal-header {
            position: sticky; top: 0; background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px); border-bottom: 1px solid #e7e5e4;
            padding: 16px; display: flex; align-items: center; z-index: 10;
        }
        .modal-back-btn {
            width: 40px; height: 40px; border-radius: 50%; background: #f5f5f4;
            display: flex; align-items: center; justify-content: center;
            border: none; cursor: pointer; margin-right: 12px; transition: background 0.15s;
        }
        .modal-back-btn:active { background: #e7e5e4; }
        .modal-title { font-size: 18px; font-weight: 700; color: #292524; }
        .modal-content { padding: 16px; }
        
        .modal-overlay {
            position: fixed; inset: 0; background: rgba(28, 25, 23, 0.6);
            backdrop-filter: blur(4px); z-index: 300;
            display: flex; align-items: center; justify-content: center; padding: 20px;
            opacity: 0; visibility: hidden; transition: opacity 0.2s, visibility 0.2s;
        }
        .modal-overlay.active { opacity: 1; visibility: visible; }
        
        .modal {
            background: white; border-radius: 24px; width: 100%; max-width: 400px;
            max-height: 80vh; overflow-y: auto; transform: scale(0.9); transition: transform 0.2s;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.08);
        }
        .modal-overlay.active .modal { transform: scale(1); }
        
        /* Role-based visibility */
        body:not([data-role="reijikai"]) .reijikai-only { display: none !important; }
        body:not([data-role="shokuin"]) .shokuin-only { display: none !important; }
        body:not([data-role="volunteer"]) .volunteer-only { display: none !important; }
        
        /* Form Elements - Enhanced */
        .input {
            width: 100%; padding: 14px 16px; border: 2px solid #e7e5e4;
            border-radius: 12px; font-size: 16px; transition: all 0.2s; background: white;
        }
        .input:hover { border-color: #d6d3d1; }
        .input:focus { outline: none; border-color: #22c55e; box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.1); }
        .form-group { margin-bottom: 20px; }
        .form-label { display: block; font-size: 14px; font-weight: 600; color: #44403c; margin-bottom: 8px; }
        .form-hint { font-size: 12px; color: #78716c; margin-top: 4px; }
        
        /* Toggle - Enhanced */
        .toggle-container {
            display: flex; align-items: center; justify-content: space-between;
            padding: 16px; background: white; border-radius: 12px;
            margin-bottom: 8px; border: 1px solid #f5f5f4;
        }
        .toggle-label { font-weight: 500; color: #292524; }
        .toggle-desc { font-size: 13px; color: #78716c; margin-top: 2px; }
        .toggle {
            position: relative; width: 52px; height: 28px; background: #d6d3d1;
            border-radius: 14px; cursor: pointer; transition: background 0.3s; flex-shrink: 0;
        }
        .toggle.active { background: var(--gradient-brand); box-shadow: var(--shadow-brand); }
        .toggle::after {
            content: ''; position: absolute; top: 2px; left: 2px;
            width: 24px; height: 24px; background: white; border-radius: 50%;
            transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .toggle.active::after { transform: translateX(24px); }
        
        /* Chips - Enhanced */
        .chip-grid { display: flex; flex-wrap: wrap; gap: 8px; }
        .chip {
            padding: 10px 16px; border-radius: 20px; font-size: 14px; font-weight: 500;
            border: 2px solid #e7e5e4; background: white; cursor: pointer;
            transition: all 0.2s; color: #57534e;
        }
        .chip:hover { border-color: #86efac; background: #f0fdf4; }
        .chip.selected {
            border-color: #22c55e; background: #f0fdf4; color: #15803d;
            box-shadow: 0 2px 8px rgba(34, 197, 94, 0.15);
        }
        .chip:active { transform: scale(0.95); }
        
        /* Schedule Grid */
        .schedule-grid { display: grid; grid-template-columns: auto repeat(3, 1fr); gap: 4px; font-size: 12px; }
        .schedule-header { padding: 8px 4px; text-align: center; font-weight: 600; color: #78716c; }
        .schedule-day { padding: 8px 4px; font-weight: 500; color: #44403c; }
        .schedule-cell {
            padding: 14px 8px; text-align: center; border-radius: 10px;
            border: 2px solid #e7e5e4; background: white; cursor: pointer; transition: all 0.2s;
        }
        .schedule-cell:hover { border-color: #86efac; background: #f0fdf4; }
        .schedule-cell.selected {
            border-color: #22c55e; background: #22c55e; color: white;
            box-shadow: 0 2px 8px rgba(34, 197, 94, 0.3);
        }
        .schedule-cell:active { transform: scale(0.95); }
        
        /* Activity Items */
        .activity-item { background: white; border-radius: 12px; padding: 16px; margin-bottom: 12px; border: 1px solid #f5f5f4; }
        .activity-date { font-size: 12px; color: #78716c; margin-bottom: 4px; }
        .activity-title { font-weight: 600; color: #292524; margin-bottom: 4px; }
        .activity-desc { font-size: 14px; color: #78716c; }
        .activity-badge { display: inline-flex; align-items: center; padding: 4px 10px; font-size: 11px; font-weight: 600; border-radius: 6px; margin-top: 8px; }
        .activity-badge.provided { background: #f0fdf4; color: #16a34a; }
        .activity-badge.received { background: #ecfeff; color: #0891b2; }
        
        /* Profile Sections */
        .profile-section {
            background: white; border-radius: 16px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.07);
            margin-bottom: 12px; overflow: hidden; border: 1px solid #f5f5f4;
        }
        .profile-section-item {
            display: flex; align-items: center; padding: 16px;
            cursor: pointer; transition: background 0.15s;
        }
        .profile-section-item:hover { background: #fafaf9; }
        .profile-section-item:active { background: #f5f5f4; }
        .profile-section-item:not(:last-child) { border-bottom: 1px solid #f5f5f4; }
        .profile-icon {
            width: 44px; height: 44px; border-radius: 12px;
            display: flex; align-items: center; justify-content: center;
            margin-right: 14px; flex-shrink: 0;
        }
        .profile-section-content { flex: 1; min-width: 0; }
        .profile-section-title { font-weight: 600; color: #292524; margin-bottom: 2px; }
        .profile-section-desc { font-size: 13px; color: #78716c; }
        .profile-section-chevron { color: #a8a29e; flex-shrink: 0; }
        
        /* News Cards - With Stripe */
        .news-card {
            background: white; border-radius: 16px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.07);
            overflow: hidden; margin-bottom: 12px; border: 1px solid #f5f5f4;
        }
        .news-card-stripe { height: 4px; width: 100%; }
        .news-card-stripe.notice { background: var(--gradient-brand); }
        .news-card-stripe.event { background: linear-gradient(135deg, #f97316 0%, #ea580c 100%); }
        .news-card-stripe.recipe { background: linear-gradient(135deg, #eab308 0%, #ca8a04 100%); }
        .news-card-stripe.local { background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); }
        .news-card-stripe.product { background: linear-gradient(135deg, #ec4899 0%, #db2777 100%); }
        .news-card-content { padding: 16px; }
        
        /* Request Badges */
        .request-badge {
            display: inline-flex; align-items: center; padding: 4px 10px;
            font-size: 12px; font-weight: 600; border-radius: 8px; margin-right: 8px;
        }
        .request-badge.urgent { background: #fef2f2; color: #dc2626; }
        .request-badge.normal { background: #f0fdf4; color: #16a34a; }
        
        /* Filter Pills - Enhanced */
        .filter-pills { display: flex; gap: 8px; overflow-x: auto; padding-bottom: 8px; -webkit-overflow-scrolling: touch; }
        .filter-pill {
            padding: 10px 18px; border-radius: 20px; font-size: 14px; font-weight: 500;
            white-space: nowrap; border: none; cursor: pointer; transition: all 0.2s;
        }
        .filter-pill.active { background: var(--gradient-brand); color: white; box-shadow: var(--shadow-brand); }
        .filter-pill:not(.active) { background: #f5f5f4; color: #57534e; }
        .filter-pill:not(.active):hover { background: #e7e5e4; }
        
        /* Tabs - Enhanced */
        .tabs { display: flex; background: #f5f5f4; border-radius: 14px; padding: 4px; margin-bottom: 16px; }
        .tab {
            flex: 1; padding: 12px 16px; border-radius: 10px; font-size: 14px; font-weight: 500;
            color: #78716c; background: transparent; border: none; cursor: pointer; transition: all 0.2s;
        }
        .tab.active { background: white; color: #292524; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); }
        
        /* Vote Buttons - Enhanced */
        .vote-btn {
            flex: 1; padding: 14px; border-radius: 12px; font-weight: 600;
            border: 2px solid; background: transparent; cursor: pointer; transition: all 0.2s;
        }
        .vote-btn.yes { border-color: #22c55e; color: #16a34a; }
        .vote-btn.yes:hover, .vote-btn.yes.selected { background: #22c55e; color: white; box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3); }
        .vote-btn.no { border-color: #ef4444; color: #dc2626; }
        .vote-btn.no:hover, .vote-btn.no.selected { background: #ef4444; color: white; box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3); }
        .vote-btn.abstain { border-color: #a8a29e; color: #78716c; }
        .vote-btn.abstain:hover, .vote-btn.abstain.selected { background: #78716c; color: white; box-shadow: 0 4px 12px rgba(120, 113, 108, 0.3); }
        
        /* Request Card */
        .request-card {
            background: white; border-radius: 16px; padding: 16px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.07);
            margin-bottom: 12px; border: 1px solid #f5f5f4;
        }
        
        /* Calendar */
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 2px; text-align: center; }
        .calendar-header { font-size: 11px; font-weight: 500; color: #78716c; padding: 8px 0; }
        .calendar-day {
            aspect-ratio: 1; display: flex; align-items: center; justify-content: center;
            font-size: 14px; border-radius: 50%; cursor: pointer; transition: all 0.15s;
        }
        .calendar-day:hover { background: #f5f5f4; }
        .calendar-day.today { background: #22c55e; color: white; font-weight: 600; }
        .calendar-day.has-event { position: relative; }
        .calendar-day.has-event::after {
            content: ''; position: absolute; bottom: 4px;
            width: 4px; height: 4px; background: #22c55e; border-radius: 50%;
        }
        .calendar-day.has-event.today::after { background: white; }
        .calendar-day.other-month { color: #d6d3d1; }
        
        /* Toast */
        #confirmation-toast { background: var(--gradient-brand); box-shadow: var(--shadow-brand); }
        
        /* Scrollbar */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #d6d3d1; border-radius: 2px; }
        
        /* Accessibility */
        :focus-visible { outline: 3px solid #22c55e; outline-offset: 2px; }
        
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after { animation-duration: 0.01ms !important; transition-duration: 0.01ms !important; }
        }
    </style>
</head>
<body class="bg-warm-50">

    <!-- ========================================
         LOGIN VIEW
         ======================================== -->
    <div id="view-login" class="view active">
        <div class="min-h-screen flex flex-col p-5 bg-gradient-to-br from-brand-50 via-white to-volunteer-50">
            
            <div class="text-center pt-6 pb-4">
                <div class="w-20 h-20 mx-auto mb-4 rounded-2xl flex items-center justify-center shadow-lg" style="background: var(--gradient-hero); box-shadow: var(--shadow-brand);">
                    <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                    </svg>
                </div>
                <h1 class="text-2xl font-bold text-warm-800 mb-1">åŒ—æ±äº¬CO-OP Hub</h1>
                <p class="text-sm text-warm-500">ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ </p>
            </div>
            
            <div class="card p-4 mb-4">
                <div class="flex items-center justify-center space-x-4 py-4">
                    <div class="w-20 h-20 bg-warm-100 rounded-xl flex items-center justify-center border-2 border-dashed border-warm-300">
                        <svg class="w-8 h-8 text-warm-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"></path>
                        </svg>
                    </div>
                    <div class="text-left">
                        <p class="font-medium text-warm-800">QRã‚³ãƒ¼ãƒ‰ã§ãƒ­ã‚°ã‚¤ãƒ³</p>
                        <p class="text-xs text-warm-500">ä¼šå“¡ã‚«ãƒ¼ãƒ‰ã‚’ã‚¹ã‚­ãƒ£ãƒ³</p>
                    </div>
                </div>
            </div>
            
            <div class="relative mb-4">
                <div class="absolute inset-0 flex items-center"><div class="w-full border-t border-warm-200"></div></div>
                <div class="relative flex justify-center"><span class="px-3 bg-gradient-to-br from-brand-50 via-white to-volunteer-50 text-sm text-warm-500">ãƒ‡ãƒ¢ç”¨</span></div>
            </div>
            
            <div class="space-y-3 flex-1">
                <p class="text-sm font-medium text-warm-600 mb-2">å½¹å‰²ã‚’é¸æŠã—ã¦ãƒ­ã‚°ã‚¤ãƒ³</p>
                
                <div class="role-card-compact" data-role="reijikai" onclick="selectRole('reijikai')">
                    <div class="text-2xl">ğŸ‘”</div>
                    <div class="flex-1">
                        <p class="font-bold text-warm-800 text-sm">å§”å“¡ä¼š</p>
                        <p class="text-xs text-warm-500">æ„æ€æ±ºå®šè€…</p>
                    </div>
                    <span class="badge badge-reijikai text-xs">Reijikai</span>
                </div>
                
                <div class="role-card-compact" data-role="shokuin" onclick="selectRole('shokuin')">
                    <div class="text-2xl">ğŸ’¼</div>
                    <div class="flex-1">
                        <p class="font-bold text-warm-800 text-sm">è·å“¡</p>
                        <p class="text-xs text-warm-500">ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†è€…</p>
                    </div>
                    <span class="badge badge-shokuin text-xs">Shokuin</span>
                </div>
                
                <div class="role-card-compact" data-role="volunteer" onclick="selectRole('volunteer')">
                    <div class="text-2xl">ğŸ¤</div>
                    <div class="flex-1">
                        <p class="font-bold text-warm-800 text-sm">ãƒœãƒ©ãƒ³ãƒ†ã‚£ã‚¢</p>
                        <p class="text-xs text-warm-500">ä¸€èˆ¬ãƒ¡ãƒ³ãƒãƒ¼</p>
                    </div>
                    <span class="badge badge-volunteer text-xs">Volunteer</span>
                </div>
            </div>
            
            <div class="pt-4 pb-2">
                <button id="login-btn" class="btn btn-primary w-full text-lg" onclick="login()" disabled>ãƒ­ã‚°ã‚¤ãƒ³</button>
                <p class="text-xs text-center text-warm-400 mt-3">36,000äººã®ä¼šå“¡ã®ãŸã‚ã®å…±å‰µã®å ´</p>
            </div>
        </div>
    </div>

    <!-- ========================================
         MAIN APP CONTAINER
         ======================================== -->
    <div id="app-container" class="app-container" style="display: none;">
        
        <!-- Header -->
        <header class="app-header">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 rounded-xl flex items-center justify-center" style="background: var(--gradient-hero); box-shadow: var(--shadow-brand);">
                        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-lg font-bold text-warm-800">åŒ—æ±äº¬CO-OP</h1>
                        <p class="text-xs text-warm-500" id="header-role-badge"></p>
                    </div>
                </div>
                <div class="flex items-center space-x-3">
                    <button class="w-10 h-10 rounded-full bg-warm-100 flex items-center justify-center hover:bg-warm-200 transition-colors" onclick="showConfirmation('é€šçŸ¥æ©Ÿèƒ½ã¯é–‹ç™ºä¸­ã§ã™')">
                        <svg class="w-5 h-5 text-warm-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                        </svg>
                    </button>
                    <div id="user-avatar" class="w-10 h-10 rounded-full flex items-center justify-center cursor-pointer border-2 border-white" style="background: var(--gradient-brand); box-shadow: var(--shadow-brand);" onclick="navigate('profile')">
                        <span class="text-white font-bold text-sm" id="avatar-initial">ç”°</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- ========================================
             DASHBOARD VIEW
             ======================================== -->
        <div id="view-dashboard" class="view active">
            <div class="p-4">
                <div class="welcome-card mb-4">
                    <div class="flex items-center justify-between relative">
                        <div>
                            <p class="text-white/80 text-sm">ã“ã‚“ã«ã¡ã¯</p>
                            <h2 class="text-xl font-bold" id="welcome-name">ç”°ä¸­ã•ã‚“</h2>
                        </div>
                        <span id="dashboard-role-badge" class="badge"></span>
                    </div>
                </div>
                
                <div class="grid grid-cols-2 gap-3 mb-4">
                    <div class="stat-card teal">
                        <div class="flex items-center justify-between">
                            <div><p class="stat-value">5</p><p class="stat-label">åŠ©ã‘åˆã„ä¾é ¼</p></div>
                            <div class="w-10 h-10 bg-volunteer-100 rounded-full flex items-center justify-center">
                                <svg class="w-5 h-5 text-volunteer-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="flex items-center justify-between">
                            <div><p class="stat-value">3</p><p class="stat-label">ä»Šå¾Œã®ã‚¤ãƒ™ãƒ³ãƒˆ</p></div>
                            <div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center">
                                <svg class="w-5 h-5 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card purple reijikai-only">
                        <div class="flex items-center justify-between">
                            <div><p class="stat-value">2</p><p class="stat-label">æŠ•ç¥¨å¾…ã¡ææ¡ˆ</p></div>
                            <div class="w-10 h-10 bg-reijikai-100 rounded-full flex items-center justify-center">
                                <svg class="w-5 h-5 text-reijikai-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path></svg>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card blue shokuin-only">
                        <div class="flex items-center justify-between">
                            <div><p class="stat-value">8</p><p class="stat-label">æ‰¿èªå¾…ã¡</p></div>
                            <div class="w-10 h-10 bg-shokuin-100 rounded-full flex items-center justify-center">
                                <svg class="w-5 h-5 text-shokuin-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>
                            </div>
                        </div>
                    </div>
                    <div class="stat-card volunteer-only">
                        <div class="flex items-center justify-between">
                            <div><p class="stat-value">12</p><p class="stat-label">æä¾›ã—ãŸåŠ©ã‘</p></div>
                            <div class="w-10 h-10 bg-brand-100 rounded-full flex items-center justify-center">
                                <svg class="w-5 h-5 text-brand-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path></svg>
                            </div>
                        </div>
                    </div>
                </div>
                
                <h3 class="font-bold text-warm-800 mb-3">ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</h3>
                <div class="grid grid-cols-2 gap-3 mb-4 reijikai-only">
                    <div class="action-card reijikai" onclick="navigate('decisions')">
                        <svg class="w-8 h-8 mb-2 relative" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
                        <p class="font-semibold relative">ææ¡ˆã‚’ä½œæˆ</p>
                        <p class="text-xs text-white/70 relative">æ–°ã—ã„ææ¡ˆã‚’æŠ•ç¨¿</p>
                    </div>
                    <div class="action-card reijikai" onclick="navigate('decisions')">
                        <svg class="w-8 h-8 mb-2 relative" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>
                        <p class="font-semibold relative">æŠ•ç¥¨çµæœ</p>
                        <p class="text-xs text-white/70 relative">çµ±è¨ˆã¨ãƒ‡ãƒ¼ã‚¿</p>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-3 mb-4 shokuin-only">
                    <div class="action-card shokuin" onclick="navigate('content')">
                        <svg class="w-8 h-8 mb-2 relative" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>
                        <p class="font-semibold relative">ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’æŠ•ç¨¿</p>
                        <p class="text-xs text-white/70 relative">æ–°ã—ã„è¨˜äº‹ã‚’å…¬é–‹</p>
                    </div>
                    <div class="action-card shokuin" onclick="navigate('events')">
                        <svg class="w-8 h-8 mb-2 relative" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                        <p class="font-semibold relative">ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†</p>
                        <p class="text-xs text-white/70 relative">ã‚¤ãƒ™ãƒ³ãƒˆã‚’ä½œæˆãƒ»ç·¨é›†</p>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-3 mb-4 volunteer-only">
                    <div class="action-card volunteer" onclick="navigate('community')">
                        <svg class="w-8 h-8 mb-2 relative" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
                        <p class="font-semibold relative">åŠ©ã‘ã‚’æ±‚ã‚ã‚‹</p>
                        <p class="text-xs text-white/70 relative">ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã«ä¾é ¼</p>
                    </div>
                    <div class="action-card brand" onclick="navigate('events')">
                        <svg class="w-8 h-8 mb-2 relative" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                        <p class="font-semibold relative">ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¦‹ã‚‹</p>
                        <p class="text-xs text-white/70 relative">å‚åŠ ç™»éŒ²</p>
                    </div>
                </div>
                
                <h3 class="font-bold text-warm-800 mb-3">æœ€æ–°ãƒ‹ãƒ¥ãƒ¼ã‚¹</h3>
                <div class="news-card card-interactive" onclick="navigate('news')">
                    <div class="news-card-stripe notice"></div>
                    <div class="news-card-content">
                        <div class="flex items-start justify-between mb-2">
                            <span class="request-badge normal">ãŠçŸ¥ã‚‰ã›</span>
                            <span class="text-xs text-warm-500">2æ™‚é–“å‰</span>
                        </div>
                        <h4 class="font-semibold text-warm-800 mb-1">å¹´æœ«å¹´å§‹ã®é…é€ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã«ã¤ã„ã¦</h4>
                        <p class="text-sm text-warm-600 line-clamp-2">12æœˆ28æ—¥ã€œ1æœˆ4æ—¥ã¾ã§ã®é…é€ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å¤‰æ›´ã®ãŠçŸ¥ã‚‰ã›ã§ã™ã€‚</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========================================
             NEWS VIEW
             ======================================== -->
        <div id="view-news" class="view">
            <div class="p-4">
                <h2 class="text-2xl font-bold text-warm-800 mb-4">ãƒ‹ãƒ¥ãƒ¼ã‚¹</h2>
                <div class="filter-pills mb-4">
                    <button class="filter-pill active" onclick="filterNews(this, 'all')">ã™ã¹ã¦</button>
                    <button class="filter-pill" onclick="filterNews(this, 'notice')">ãŠçŸ¥ã‚‰ã›</button>
                    <button class="filter-pill" onclick="filterNews(this, 'event')">ã‚¤ãƒ™ãƒ³ãƒˆ</button>
                    <button class="filter-pill" onclick="filterNews(this, 'recipe')">ãƒ¬ã‚·ãƒ”</button>
                    <button class="filter-pill" onclick="filterNews(this, 'local')">åœ°åŸŸ</button>
                    <button class="filter-pill" onclick="filterNews(this, 'product')">å•†å“</button>
                </div>
                <div id="news-list" class="space-y-3">
                    <div class="news-card card-interactive" data-category="notice">
                        <div class="news-card-stripe notice"></div>
                        <div class="news-card-content">
                            <div class="flex items-center justify-between mb-2">
                                <span class="request-badge normal">ãŠçŸ¥ã‚‰ã›</span>
                                <span class="text-xs text-warm-500">2024å¹´12æœˆ10æ—¥</span>
                            </div>
                            <h3 class="font-bold text-warm-800 mb-2">å¹´æœ«å¹´å§‹ã®é…é€ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã«ã¤ã„ã¦</h3>
                            <p class="text-sm text-warm-600 mb-3">12æœˆ28æ—¥ã€œ1æœˆ4æ—¥ã¾ã§ã®é…é€ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å¤‰æ›´ã®ãŠçŸ¥ã‚‰ã›ã§ã™ã€‚</p>
                            <span class="text-sm text-warm-500">ğŸ‘ 234äººãŒé–²è¦§</span>
                        </div>
                    </div>
                    <div class="news-card card-interactive" data-category="event">
                        <div class="news-card-stripe event"></div>
                        <div class="news-card-content">
                            <div class="flex items-center justify-between mb-2">
                                <span class="request-badge" style="background: #fef3c7; color: #d97706;">ã‚¤ãƒ™ãƒ³ãƒˆ</span>
                                <span class="text-xs text-warm-500">2024å¹´12æœˆ9æ—¥</span>
                            </div>
                            <h3 class="font-bold text-warm-800 mb-2">æ–°æ˜¥ã‚‚ã¡ã¤ãå¤§ä¼šã®ã”æ¡ˆå†…</h3>
                            <p class="text-sm text-warm-600 mb-3">1æœˆ15æ—¥ï¼ˆæ—¥ï¼‰ã«é–‹å‚¬ã•ã‚Œã‚‹æ–°æ˜¥ã‚‚ã¡ã¤ãå¤§ä¼šã®å‚åŠ è€…ã‚’å‹Ÿé›†ä¸­ã€‚</p>
                            <span class="text-sm text-warm-500">ğŸ‘ 189äººãŒé–²è¦§</span>
                        </div>
                    </div>
                    <div class="news-card card-interactive" data-category="recipe">
                        <div class="news-card-stripe recipe"></div>
                        <div class="news-card-content">
                            <div class="flex items-center justify-between mb-2">
                                <span class="request-badge" style="background: #fef9c3; color: #ca8a04;">ãƒ¬ã‚·ãƒ”</span>
                                <span class="text-xs text-warm-500">2024å¹´12æœˆ8æ—¥</span>
                            </div>
                            <h3 class="font-bold text-warm-800 mb-2">å†¬é‡èœãŸã£ã·ã‚Šãƒãƒˆãƒ•ã®ãƒ¬ã‚·ãƒ”</h3>
                            <p class="text-sm text-warm-600 mb-3">ä»Šé€±å±Šãå†¬é‡èœã‚’ä½¿ã£ãŸã€ä½“ãŒæ¸©ã¾ã‚‹ãƒãƒˆãƒ•ã®ãƒ¬ã‚·ãƒ”ã‚’ã”ç´¹ä»‹ã€‚</p>
                            <span class="text-sm text-warm-500">ğŸ‘ 156äººãŒé–²è¦§</span>
                        </div>
                    </div>
                    <div class="news-card card-interactive" data-category="local">
                        <div class="news-card-stripe local"></div>
                        <div class="news-card-content">
                            <div class="flex items-center justify-between mb-2">
                                <span class="request-badge" style="background: #dbeafe; color: #2563eb;">åœ°åŸŸ</span>
                                <span class="text-xs text-warm-500">2024å¹´12æœˆ7æ—¥</span>
                            </div>
                            <h3 class="font-bold text-warm-800 mb-2">ç·´é¦¬åŒºã‚»ãƒ³ã‚¿ãƒ¼ å¹´æœ«å¤§æƒé™¤ãƒœãƒ©ãƒ³ãƒ†ã‚£ã‚¢å‹Ÿé›†</h3>
                            <p class="text-sm text-warm-600 mb-3">12æœˆ23æ—¥ï¼ˆåœŸï¼‰ã«ç·´é¦¬åŒºã‚»ãƒ³ã‚¿ãƒ¼ã®å¤§æƒé™¤ã‚’è¡Œã„ã¾ã™ã€‚ã”å”åŠ›ã„ãŸã ã‘ã‚‹æ–¹ã‚’å‹Ÿé›†ã€‚</p>
                            <span class="text-sm text-warm-500">ğŸ‘ 98äººãŒé–²è¦§</span>
                        </div>
                    </div>
                    <div class="news-card card-interactive" data-category="product">
                        <div class="news-card-stripe product"></div>
                        <div class="news-card-content">
                            <div class="flex items-center justify-between mb-2">
                                <span class="request-badge" style="background: #fce7f3; color: #db2777;">å•†å“</span>
                                <span class="text-xs text-warm-500">2024å¹´12æœˆ6æ—¥</span>
                            </div>
                            <h3 class="font-bold text-warm-800 mb-2">æ–°å•†å“ï¼šæœ‰æ©Ÿæ ½åŸ¹ã„ã¡ã”ã€Œã‚ã¾ãŠã†ã€å…¥è·</h3>
                            <p class="text-sm text-warm-600 mb-3">ç¦å²¡çœŒç”£ã®æœ‰æ©Ÿæ ½åŸ¹ã„ã¡ã”ã€Œã‚ã¾ãŠã†ã€ãŒä»Šé€±ã‹ã‚‰æ³¨æ–‡å¯èƒ½ã«ãªã‚Šã¾ã—ãŸã€‚</p>
                            <span class="text-sm text-warm-500">ğŸ‘ 312äººãŒé–²è¦§</span>
                        </div>
                    </div>
                </div>
                <div id="news-empty" class="text-center py-12" style="display: none;">
                    <svg class="w-16 h-16 mx-auto mb-4 text-warm-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                    <p class="text-warm-500">ã“ã®ã‚«ãƒ†ã‚´ãƒªã®ãƒ‹ãƒ¥ãƒ¼ã‚¹ã¯ã‚ã‚Šã¾ã›ã‚“</p>
                </div>
            </div>
        </div>

        <!-- ========================================
             COMMUNITY VIEW
             ======================================== -->
        <div id="view-community" class="view">
            <div class="p-4">
                <h2 class="text-2xl font-bold text-warm-800 mb-4">ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£åŠ©ã‘åˆã„</h2>
                <div class="tabs">
                    <button class="tab active" onclick="switchCommunityTab(this, 'requests')">ä¾é ¼ä¸€è¦§</button>
                    <button class="tab" onclick="switchCommunityTab(this, 'offers')">æä¾›ä¸€è¦§</button>
                    <button class="tab" onclick="switchCommunityTab(this, 'my')">ãƒã‚¤æŠ•ç¨¿</button>
                </div>
                <button class="btn btn-primary w-full mb-4" onclick="showModal('request-modal')">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
                    åŠ©ã‘ã‚’æ±‚ã‚ã‚‹ / æä¾›ã™ã‚‹
                </button>
                <div id="community-requests" class="space-y-3">
                    <div class="request-card card-interactive">
                        <div class="flex items-start justify-between mb-2">
                            <div class="flex items-center space-x-2"><span class="text-2xl">ğŸ‘¶</span><span class="request-badge urgent">ç·Šæ€¥</span></div>
                            <span class="text-xs text-warm-500">2æ™‚é–“å‰</span>
                        </div>
                        <h4 class="font-semibold text-warm-800 mb-1">12æœˆ15æ—¥ï¼ˆæ—¥ï¼‰åˆå¾Œã®ãƒ™ãƒ“ãƒ¼ã‚·ãƒƒã‚¿ãƒ¼</h4>
                        <p class="text-sm text-warm-600 mb-3">14:00ã€œ18:00ã¾ã§ã€2æ­³ã®å­ä¾›ã‚’è¦‹ã¦ã„ãŸã ã‘ã‚‹æ–¹ã‚’æ¢ã—ã¦ã„ã¾ã™ã€‚</p>
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-warm-500">ç·´é¦¬åŒº â€¢ ç”°ä¸­ã•ã‚“</span>
                            <div class="flex items-center space-x-3 text-warm-500"><span>ğŸ‘ 12</span><span>ğŸ’¬ 3</span></div>
                        </div>
                    </div>
                    <div class="request-card card-interactive">
                        <div class="flex items-start justify-between mb-2">
                            <div class="flex items-center space-x-2"><span class="text-2xl">ğŸš—</span><span class="request-badge normal">é€šå¸¸</span></div>
                            <span class="text-xs text-warm-500">5æ™‚é–“å‰</span>
                        </div>
                        <h4 class="font-semibold text-warm-800 mb-1">ç—…é™¢ã¸ã®é€è¿ã‚’ãŠé¡˜ã„ã—ãŸã„</h4>
                        <p class="text-sm text-warm-600 mb-3">æ¥é€±æ°´æ›œæ—¥ã€ç·´é¦¬é§…ã‹ã‚‰ç—…é™¢ã¾ã§é€ã£ã¦ã„ãŸã ã‘ã‚‹æ–¹ã‚’æ¢ã—ã¦ã„ã¾ã™ã€‚</p>
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-warm-500">ç·´é¦¬åŒº â€¢ å±±ç”°ã•ã‚“</span>
                            <div class="flex items-center space-x-3 text-warm-500"><span>ğŸ‘ 8</span><span>ğŸ’¬ 1</span></div>
                        </div>
                    </div>
                </div>
                <div id="community-offers" class="space-y-3" style="display: none;">
                    <div class="request-card card-interactive">
                        <div class="flex items-start justify-between mb-2">
                            <div class="flex items-center space-x-2"><span class="text-2xl">ğŸ“š</span><span class="request-badge" style="background: #ecfeff; color: #0891b2;">æä¾›</span></div>
                            <span class="text-xs text-warm-500">3æ™‚é–“å‰</span>
                        </div>
                        <h4 class="font-semibold text-warm-800 mb-1">å°å­¦ç”Ÿã®å®¿é¡Œã‚µãƒãƒ¼ãƒˆã§ãã¾ã™</h4>
                        <p class="text-sm text-warm-600 mb-3">å¹³æ—¥å¤•æ–¹ã€å°å­¦ç”Ÿã®ãŠå­æ§˜ã®å®¿é¡Œã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
                        <div class="flex items-center justify-between text-sm">
                            <span class="text-warm-500">æ¿æ©‹åŒº â€¢ éˆ´æœ¨ã•ã‚“</span>
                            <div class="flex items-center space-x-3 text-warm-500"><span>ğŸ‘ 20</span><span>ğŸ’¬ 4</span></div>
                        </div>
                    </div>
                </div>
                <div id="community-my" style="display: none;">
                    <div class="text-center py-8 text-warm-500">
                        <svg class="w-16 h-16 mx-auto mb-4 text-warm-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                        <p>ã¾ã æŠ•ç¨¿ãŒã‚ã‚Šã¾ã›ã‚“</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========================================
             EVENTS VIEW
             ======================================== -->
        <div id="view-events" class="view">
            <div class="p-4">
                <h2 class="text-2xl font-bold text-warm-800 mb-4">ã‚¤ãƒ™ãƒ³ãƒˆ</h2>
                <div class="tabs mb-4">
                    <button class="tab active">ã™ã¹ã¦</button>
                    <button class="tab">å‚åŠ äºˆå®š</button>
                    <button class="tab">éå»</button>
                </div>
                <h3 class="font-bold text-warm-800 mb-3">2024å¹´12æœˆ</h3>
                <div class="space-y-3 mb-6">
                    <div class="card p-4 card-interactive">
                        <div class="flex items-start space-x-4">
                            <div class="w-14 h-14 bg-red-100 rounded-xl flex flex-col items-center justify-center flex-shrink-0">
                                <span class="text-xs text-red-600 font-medium">12æœˆ</span>
                                <span class="text-xl font-bold text-red-700">14</span>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-semibold text-warm-800 mb-1">è¦ªå­ã‚¯ãƒªã‚¹ãƒã‚¹ä¼š</h4>
                                <p class="text-sm text-warm-600 mb-2">æ¿æ©‹åŒºæ°‘ã‚»ãƒ³ã‚¿ãƒ¼ â€¢ 13:00ã€œ16:00</p>
                                <div class="flex items-center justify-between">
                                    <span class="text-xs text-warm-500">ğŸ‘¥ 28/40äººå‚åŠ </span>
                                    <span class="badge badge-volunteer text-xs">å‚åŠ å—ä»˜ä¸­</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card p-4 card-interactive">
                        <div class="flex items-start space-x-4">
                            <div class="w-14 h-14 bg-brand-100 rounded-xl flex flex-col items-center justify-center flex-shrink-0">
                                <span class="text-xs text-brand-600 font-medium">12æœˆ</span>
                                <span class="text-xl font-bold text-brand-700">15</span>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-semibold text-warm-800 mb-1">æ–°æ˜¥ã‚‚ã¡ã¤ãå¤§ä¼š</h4>
                                <p class="text-sm text-warm-600 mb-2">ç·´é¦¬åŒºæ°‘ã‚»ãƒ³ã‚¿ãƒ¼ â€¢ 10:00ã€œ14:00</p>
                                <div class="flex items-center justify-between">
                                    <span class="text-xs text-warm-500">ğŸ‘¥ 32/50äººå‚åŠ </span>
                                    <span class="badge badge-volunteer text-xs">å‚åŠ å—ä»˜ä¸­</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card p-4 card-interactive">
                        <div class="flex items-start space-x-4">
                            <div class="w-14 h-14 bg-volunteer-100 rounded-xl flex flex-col items-center justify-center flex-shrink-0">
                                <span class="text-xs text-volunteer-600 font-medium">12æœˆ</span>
                                <span class="text-xl font-bold text-volunteer-700">20</span>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-semibold text-warm-800 mb-1">å†¬ã®æ–™ç†æ•™å®¤</h4>
                                <p class="text-sm text-warm-600 mb-2">CO-OPã‚­ãƒƒãƒãƒ³ã‚¹ã‚¿ã‚¸ã‚ª â€¢ 14:00ã€œ16:00</p>
                                <div class="flex items-center justify-between">
                                    <span class="text-xs text-warm-500">ğŸ‘¥ 18/20äººå‚åŠ </span>
                                    <span class="badge" style="background: #fef3c7; color: #d97706; font-size: 12px;">æ®‹ã‚Šã‚ãšã‹</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card p-4 card-interactive">
                        <div class="flex items-start space-x-4">
                            <div class="w-14 h-14 bg-orange-100 rounded-xl flex flex-col items-center justify-center flex-shrink-0">
                                <span class="text-xs text-orange-600 font-medium">12æœˆ</span>
                                <span class="text-xl font-bold text-orange-700">23</span>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-semibold text-warm-800 mb-1">å¹´æœ«å¤§æƒé™¤ãƒœãƒ©ãƒ³ãƒ†ã‚£ã‚¢</h4>
                                <p class="text-sm text-warm-600 mb-2">ç·´é¦¬åŒºã‚»ãƒ³ã‚¿ãƒ¼ â€¢ 9:00ã€œ12:00</p>
                                <div class="flex items-center justify-between">
                                    <span class="text-xs text-warm-500">ğŸ‘¥ 8/20äººå‚åŠ </span>
                                    <span class="badge badge-volunteer text-xs">å‚åŠ å—ä»˜ä¸­</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <h3 class="font-bold text-warm-800 mb-3">2025å¹´1æœˆ</h3>
                <div class="space-y-3">
                    <div class="card p-4 card-interactive">
                        <div class="flex items-start space-x-4">
                            <div class="w-14 h-14 bg-shokuin-100 rounded-xl flex flex-col items-center justify-center flex-shrink-0">
                                <span class="text-xs text-shokuin-600 font-medium">1æœˆ</span>
                                <span class="text-xl font-bold text-shokuin-700">8</span>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-semibold text-warm-800 mb-1">æ–°å¹´äº¤æµä¼š</h4>
                                <p class="text-sm text-warm-600 mb-2">è±Šå³¶åŒºã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ›ãƒ¼ãƒ« â€¢ 13:00ã€œ16:00</p>
                                <div class="flex items-center justify-between">
                                    <span class="text-xs text-warm-500">ğŸ‘¥ 45/100äººå‚åŠ </span>
                                    <span class="badge badge-volunteer text-xs">å‚åŠ å—ä»˜ä¸­</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card p-4 card-interactive">
                        <div class="flex items-start space-x-4">
                            <div class="w-14 h-14 bg-reijikai-100 rounded-xl flex flex-col items-center justify-center flex-shrink-0">
                                <span class="text-xs text-reijikai-600 font-medium">1æœˆ</span>
                                <span class="text-xl font-bold text-reijikai-700">18</span>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-semibold text-warm-800 mb-1">å­è‚²ã¦ã‚µãƒãƒ¼ã‚¿ãƒ¼ç ”ä¿®ä¼š</h4>
                                <p class="text-sm text-warm-600 mb-2">ç·´é¦¬åŒºã‚»ãƒ³ã‚¿ãƒ¼ â€¢ 10:00ã€œ15:00</p>
                                <div class="flex items-center justify-between">
                                    <span class="text-xs text-warm-500">ğŸ‘¥ 5/25äººå‚åŠ </span>
                                    <span class="badge badge-volunteer text-xs">å‚åŠ å—ä»˜ä¸­</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========================================
             KNOWLEDGE VIEW
             ======================================== -->
        <div id="view-knowledge" class="view">
            <div class="p-4">
                <h2 class="text-2xl font-bold text-warm-800 mb-4">çŸ¥è­˜å€‰åº«</h2>
                <div class="relative mb-4">
                    <svg class="w-5 h-5 text-warm-400 absolute left-4 top-1/2 transform -translate-y-1/2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                    <input type="text" class="input pl-12" placeholder="ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œç´¢...">
                </div>
                <div class="grid grid-cols-2 gap-3 mb-4">
                    <div class="card p-4 card-interactive"><div class="text-3xl mb-2">â“</div><h4 class="font-semibold text-warm-800">ã‚ˆãã‚ã‚‹è³ªå•</h4><p class="text-sm text-warm-500">32ä»¶</p></div>
                    <div class="card p-4 card-interactive"><div class="text-3xl mb-2">ğŸ³</div><h4 class="font-semibold text-warm-800">ãƒ¬ã‚·ãƒ”é›†</h4><p class="text-sm text-warm-500">128ä»¶</p></div>
                    <div class="card p-4 card-interactive"><div class="text-3xl mb-2">ğŸ“‹</div><h4 class="font-semibold text-warm-800">åˆ©ç”¨ã‚¬ã‚¤ãƒ‰</h4><p class="text-sm text-warm-500">15ä»¶</p></div>
                    <div class="card p-4 card-interactive"><div class="text-3xl mb-2">ğŸ“œ</div><h4 class="font-semibold text-warm-800">è¦ç´„ãƒ»ãƒãƒªã‚·ãƒ¼</h4><p class="text-sm text-warm-500">8ä»¶</p></div>
                </div>
            </div>
        </div>

        <!-- ========================================
             PROFILE VIEW
             ======================================== -->
        <div id="view-profile" class="view">
            <div class="p-4">
                <h2 class="text-2xl font-bold text-warm-800 mb-4">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</h2>
                <div class="card p-6 mb-4 text-center">
                    <div class="w-24 h-24 mx-auto rounded-full flex items-center justify-center mb-4 ring-4 ring-white" style="background: var(--gradient-hero); box-shadow: 0 8px 24px rgba(34, 197, 94, 0.25);">
                        <span class="text-4xl font-bold text-white" id="profile-avatar">ç”°</span>
                    </div>
                    <h3 class="text-xl font-bold text-warm-800 mb-1" id="profile-name">ç”°ä¸­ èŠ±å­</h3>
                    <p class="text-sm text-warm-500 mb-3">ä¼šå“¡ç•ªå·: <span id="profile-member-number">NT-12345</span></p>
                    <span id="profile-role-badge" class="badge"></span>
                </div>
                <div class="profile-section">
                    <div class="profile-section-item" onclick="openProfileModal('basic-info')">
                        <div class="profile-icon bg-shokuin-100"><svg class="w-6 h-6 text-shokuin-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg></div>
                        <div class="profile-section-content"><p class="profile-section-title">åŸºæœ¬æƒ…å ±</p><p class="profile-section-desc">åå‰ã€é€£çµ¡å…ˆã€ä½æ‰€ãªã©</p></div>
                        <svg class="w-5 h-5 profile-section-chevron" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                    </div>
                </div>
                <div class="profile-section">
                    <div class="profile-section-item" onclick="openProfileModal('support-preferences')">
                        <div class="profile-icon bg-brand-100"><svg class="w-6 h-6 text-brand-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path></svg></div>
                        <div class="profile-section-content"><p class="profile-section-title">æä¾›ã§ãã‚‹ã‚µãƒãƒ¼ãƒˆ</p><p class="profile-section-desc">è‚²å…ã€é€è¿ã€è²·ã„ç‰©ä»£è¡Œãªã©</p></div>
                        <svg class="w-5 h-5 profile-section-chevron" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                    </div>
                    <div class="profile-section-item" onclick="openProfileModal('support-needed')">
                        <div class="profile-icon bg-orange-100"><svg class="w-6 h-6 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"></path></svg></div>
                        <div class="profile-section-content"><p class="profile-section-title">å¿…è¦ãªã‚µãƒãƒ¼ãƒˆ</p><p class="profile-section-desc">ã‚µãƒãƒ¼ãƒˆã‚’å—ã‘ãŸã„ã‚«ãƒ†ã‚´ãƒª</p></div>
                        <svg class="w-5 h-5 profile-section-chevron" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                    </div>
                    <div class="profile-section-item" onclick="openProfileModal('availability')">
                        <div class="profile-icon bg-reijikai-100"><svg class="w-6 h-6 text-reijikai-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div>
                        <div class="profile-section-content"><p class="profile-section-title">å¯¾å¿œå¯èƒ½ãªæ™‚é–“</p><p class="profile-section-desc">é€±é–“ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­å®š</p></div>
                        <svg class="w-5 h-5 profile-section-chevron" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                    </div>
                </div>
                <div class="profile-section">
                    <div class="profile-section-item" onclick="openProfileModal('privacy')">
                        <div class="profile-icon bg-red-100"><svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg></div>
                        <div class="profile-section-content"><p class="profile-section-title">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼è¨­å®š</p><p class="profile-section-desc">å…¬é–‹ç¯„å›²ãƒ»è¡¨ç¤ºåã®ç®¡ç†</p></div>
                        <svg class="w-5 h-5 profile-section-chevron" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                    </div>
                </div>
                <div class="profile-section">
                    <div class="profile-section-item" onclick="openProfileModal('activity')">
                        <div class="profile-icon bg-volunteer-100"><svg class="w-6 h-6 text-volunteer-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg></div>
                        <div class="profile-section-content"><p class="profile-section-title">æ´»å‹•å±¥æ­´</p><p class="profile-section-desc">åŠ©ã‘åˆã„æ´»å‹•ã®å±¥æ­´</p></div>
                        <svg class="w-5 h-5 profile-section-chevron" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========================================
             DECISIONS VIEW (Reijikai Only)
             ======================================== -->
        <div id="view-decisions" class="view reijikai-only">
            <div class="p-4">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-2xl font-bold text-warm-800">æ„æ€æ±ºå®š</h2>
                    <button class="btn btn-primary py-2 px-4" onclick="showModal('proposal-modal')">+ æ–°è¦ææ¡ˆ</button>
                </div>
                <div class="grid grid-cols-3 gap-3 mb-4">
                    <div class="stat-card purple text-center"><p class="stat-value text-xl">3</p><p class="stat-label text-xs">æŠ•ç¥¨ä¸­</p></div>
                    <div class="stat-card purple text-center"><p class="stat-value text-xl">78%</p><p class="stat-label text-xs">å‚åŠ ç‡</p></div>
                    <div class="stat-card purple text-center"><p class="stat-value text-xl">5</p><p class="stat-label text-xs">ä»Šæœˆå®Œäº†</p></div>
                </div>
                <div class="tabs mb-4">
                    <button class="tab active" onclick="switchDecisionTab(this, 'active')">æŠ•ç¥¨ä¸­</button>
                    <button class="tab" onclick="switchDecisionTab(this, 'completed')">å®Œäº†</button>
                    <button class="tab" onclick="switchDecisionTab(this, 'my')">è‡ªåˆ†ã®ææ¡ˆ</button>
                </div>
                <div id="decisions-active">
                    <h3 class="font-bold text-warm-800 mb-3">æŠ•ç¥¨ä¸­ã®ææ¡ˆ</h3>
                    <div class="space-y-4">
                        <div class="card p-4" id="proposal-1">
                            <div class="flex items-start justify-between mb-2">
                                <span class="badge badge-reijikai text-xs">æ–¹é‡</span>
                                <span class="text-xs text-warm-500">æ®‹ã‚Š3æ—¥</span>
                            </div>
                            <h4 class="font-semibold text-warm-800 mb-2">2025å¹´åº¦ã®æ´»å‹•æ–¹é‡ã«ã¤ã„ã¦</h4>
                            <p class="text-sm text-warm-600 mb-4">æ¥å¹´åº¦ã®é‡ç‚¹æ´»å‹•é …ç›®ã¨ã—ã¦ã€åœ°åŸŸã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£å¼·åŒ–ã‚’ææ¡ˆã—ã¾ã™ã€‚</p>
                            <div class="mb-4">
                                <div class="flex justify-between text-sm mb-2">
                                    <span class="text-warm-600">æŠ•ç¥¨çŠ¶æ³</span>
                                    <span class="text-warm-800 font-medium" id="proposal-1-progress">24/30 (80%)</span>
                                </div>
                                <div class="h-2 bg-warm-200 rounded-full overflow-hidden">
                                    <div class="h-full rounded-full transition-all duration-300" id="proposal-1-bar" style="width: 80%; background: var(--gradient-brand);"></div>
                                </div>
                            </div>
                            <div id="proposal-1-voting" class="flex space-x-2">
                                <button class="vote-btn yes" onclick="castVote(1, 'yes')">è³›æˆ</button>
                                <button class="vote-btn no" onclick="castVote(1, 'no')">åå¯¾</button>
                                <button class="vote-btn abstain" onclick="castVote(1, 'abstain')">æ£„æ¨©</button>
                            </div>
                            <div id="proposal-1-voted" class="hidden">
                                <div class="flex items-center justify-between p-3 bg-brand-50 rounded-xl border border-brand-200">
                                    <div class="flex items-center space-x-2">
                                        <svg class="w-5 h-5 text-brand-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                                        <span class="text-brand-800 font-medium" id="proposal-1-vote-text">æŠ•ç¥¨æ¸ˆã¿</span>
                                    </div>
                                    <button class="text-sm text-brand-600 underline" onclick="changeVote(1)">å¤‰æ›´ã™ã‚‹</button>
                                </div>
                            </div>
                        </div>
                        <div class="card p-4 border-2 border-red-200" id="proposal-3">
                            <div class="flex items-start justify-between mb-2">
                                <div class="flex items-center space-x-2">
                                    <span class="badge" style="background: #fef2f2; color: #dc2626; font-size: 12px;">ç·Šæ€¥</span>
                                    <span class="badge" style="background: #eef2ff; color: #4f46e5; font-size: 12px;">ã‚¤ãƒ™ãƒ³ãƒˆ</span>
                                </div>
                                <span class="text-xs text-red-500 font-medium">æ®‹ã‚Š1æ—¥</span>
                            </div>
                            <h4 class="font-semibold text-warm-800 mb-2">æ–°å¹´ä¼šã®é–‹å‚¬ã«ã¤ã„ã¦</h4>
                            <p class="text-sm text-warm-600 mb-4">1æœˆ8æ—¥ã«æ–°å¹´äº¤æµä¼šã‚’é–‹å‚¬ã™ã‚‹ã“ã¨ã‚’ææ¡ˆã—ã¾ã™ã€‚</p>
                            <div class="mb-4">
                                <div class="flex justify-between text-sm mb-2">
                                    <span class="text-warm-600">æŠ•ç¥¨çŠ¶æ³</span>
                                    <span class="text-warm-800 font-medium" id="proposal-3-progress">28/30 (93%)</span>
                                </div>
                                <div class="h-2 bg-warm-200 rounded-full overflow-hidden">
                                    <div class="h-full rounded-full transition-all duration-300" id="proposal-3-bar" style="width: 93%; background: var(--gradient-brand);"></div>
                                </div>
                            </div>
                            <div id="proposal-3-voting" class="flex space-x-2">
                                <button class="vote-btn yes" onclick="castVote(3, 'yes')">è³›æˆ</button>
                                <button class="vote-btn no" onclick="castVote(3, 'no')">åå¯¾</button>
                                <button class="vote-btn abstain" onclick="castVote(3, 'abstain')">æ£„æ¨©</button>
                            </div>
                            <div id="proposal-3-voted" class="hidden">
                                <div class="flex items-center justify-between p-3 bg-brand-50 rounded-xl border border-brand-200">
                                    <div class="flex items-center space-x-2">
                                        <svg class="w-5 h-5 text-brand-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                                        <span class="text-brand-800 font-medium" id="proposal-3-vote-text">æŠ•ç¥¨æ¸ˆã¿</span>
                                    </div>
                                    <button class="text-sm text-brand-600 underline" onclick="changeVote(3)">å¤‰æ›´ã™ã‚‹</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="decisions-completed" style="display: none;">
                    <h3 class="font-bold text-warm-800 mb-3">å®Œäº†ã—ãŸææ¡ˆ</h3>
                    <div class="space-y-4">
                        <div class="card p-4">
                            <div class="flex items-start justify-between mb-2">
                                <div class="flex items-center space-x-2">
                                    <span class="badge badge-reijikai text-xs">æ–¹é‡</span>
                                    <span class="badge" style="background: #f0fdf4; color: #16a34a; font-size: 12px;">âœ“ å¯æ±º</span>
                                </div>
                                <span class="text-xs text-warm-500">2024å¹´12æœˆ5æ—¥</span>
                            </div>
                            <h4 class="font-semibold text-warm-800 mb-2">å¹´æœ«å¹´å§‹ã®é…é€ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å¤‰æ›´</h4>
                            <p class="text-sm text-warm-600 mb-3">12æœˆ28æ—¥ã€œ1æœˆ4æ—¥ã®é…é€ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å¤‰æ›´ã«ã¤ã„ã¦</p>
                            <div class="mb-2">
                                <div class="flex justify-between text-xs mb-1">
                                    <span class="text-brand-600 font-medium">è³›æˆ 87%</span>
                                    <span class="text-red-600">åå¯¾ 10%</span>
                                    <span class="text-warm-500">æ£„æ¨© 3%</span>
                                </div>
                                <div class="h-3 bg-warm-200 rounded-full overflow-hidden flex">
                                    <div class="h-full bg-brand-500" style="width: 87%"></div>
                                    <div class="h-full bg-red-500" style="width: 10%"></div>
                                    <div class="h-full bg-warm-400" style="width: 3%"></div>
                                </div>
                            </div>
                            <p class="text-xs text-warm-500">æŠ•ç¥¨ç‡: 100% (30/30)</p>
                        </div>
                    </div>
                </div>
                <div id="decisions-my" style="display: none;">
                    <h3 class="font-bold text-warm-800 mb-3">è‡ªåˆ†ã®ææ¡ˆ</h3>
                    <div class="text-center py-8 text-warm-500">
                        <svg class="w-16 h-16 mx-auto mb-4 text-warm-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                        <p>ã¾ã ææ¡ˆãŒã‚ã‚Šã¾ã›ã‚“</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========================================
             CONTENT VIEW (Shokuin Only)
             ======================================== -->
        <div id="view-content" class="view shokuin-only">
            <div class="p-4">
                <h2 class="text-2xl font-bold text-warm-800 mb-4">ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†</h2>
                <div class="tabs">
                    <button class="tab active">ãƒ‹ãƒ¥ãƒ¼ã‚¹</button>
                    <button class="tab">ã‚¤ãƒ™ãƒ³ãƒˆ</button>
                    <button class="tab">çŸ¥è­˜å€‰åº«</button>
                </div>
                <button class="btn btn-primary w-full mb-4">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
                    æ–°è¦æŠ•ç¨¿ã‚’ä½œæˆ
                </button>
                <div class="card p-4 mb-3">
                    <div class="flex items-start justify-between mb-2">
                        <span class="request-badge normal">å…¬é–‹ä¸­</span>
                        <button class="text-warm-400 hover:text-warm-600 transition-colors"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button>
                    </div>
                    <h4 class="font-semibold text-warm-800 mb-1">å¹´æœ«å¹´å§‹ã®é…é€ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</h4>
                    <p class="text-sm text-warm-500">2024å¹´12æœˆ10æ—¥ â€¢ 234å›é–²è¦§</p>
                </div>
            </div>
        </div>

        <!-- ========================================
             BOTTOM NAVIGATION
             ======================================== -->
        <nav class="bottom-nav">
            <button class="nav-item active" onclick="navigate('dashboard')" data-view="dashboard">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>
                <span>ãƒ›ãƒ¼ãƒ </span>
            </button>
            <button class="nav-item" onclick="navigate('news')" data-view="news">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"></path></svg>
                <span>ãƒ‹ãƒ¥ãƒ¼ã‚¹</span>
                <span class="nav-badge">3</span>
            </button>
            <button class="nav-item" onclick="navigate('community')" data-view="community">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                <span>åŠ©ã‘åˆã„</span>
                <span class="nav-badge">5</span>
            </button>
            <button class="nav-item" onclick="navigate('events')" data-view="events">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                <span>ã‚¤ãƒ™ãƒ³ãƒˆ</span>
            </button>
            <button class="nav-item" onclick="toggleMoreMenu()">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                <span>ãã®ä»–</span>
            </button>
        </nav>

        <!-- More Menu Overlay -->
        <div id="more-menu-overlay" class="more-menu-overlay" onclick="toggleMoreMenu()">
            <div class="more-menu" onclick="event.stopPropagation()">
                <div class="more-menu-handle"></div>
                <button class="more-menu-item" onclick="navigate('knowledge'); toggleMoreMenu();"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>çŸ¥è­˜å€‰åº«</button>
                <button class="more-menu-item" onclick="navigate('profile'); toggleMoreMenu();"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>ãƒã‚¤ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</button>
                <button class="more-menu-item reijikai-only" onclick="navigate('decisions'); toggleMoreMenu();"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path></svg>æ„æ€æ±ºå®š</button>
                <button class="more-menu-item shokuin-only" onclick="navigate('content'); toggleMoreMenu();"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†</button>
                <div class="more-menu-divider"></div>
                <button class="more-menu-item" onclick="window.open('https://seikatsuclub.coop/', '_blank')"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path></svg>å•†å“æ³¨æ–‡<svg class="w-4 h-4 ml-auto text-warm-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg></button>
                <div class="more-menu-divider"></div>
                <button class="more-menu-item text-red-600" onclick="logout()"><svg class="text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg>ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
            </div>
        </div>
    </div>

    <!-- ========================================
         PROFILE MODALS
         ======================================== -->
    <div id="modal-basic-info" class="modal-fullscreen">
        <div class="modal-header">
            <button class="modal-back-btn" onclick="closeProfileModal('basic-info')"><svg class="w-5 h-5 text-warm-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button>
            <h2 class="modal-title">åŸºæœ¬æƒ…å ±</h2>
        </div>
        <div class="modal-content">
            <div class="form-group"><label class="form-label">è¡¨ç¤ºå</label><input type="text" class="input" value="ç”°ä¸­ èŠ±å­"><p class="form-hint">ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã§è¡¨ç¤ºã•ã‚Œã‚‹åå‰ã§ã™</p></div>
            <div class="form-group"><label class="form-label">ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ï¼ˆä»»æ„ï¼‰</label><input type="text" class="input" placeholder="ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã‚’å…¥åŠ›"><p class="form-hint">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ä¿è­·ã®ãŸã‚æœ¬åã®ä»£ã‚ã‚Šã«ä½¿ç”¨ã§ãã¾ã™</p></div>
            <div class="form-group"><label class="form-label">ä¼šå“¡ç•ªå·</label><input type="text" class="input" value="NT-12345" disabled style="background: #f5f5f4;"></div>
            <div class="form-group"><label class="form-label">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label><input type="email" class="input" value="tanaka@example.com"></div>
            <div class="form-group"><label class="form-label">é›»è©±ç•ªå·</label><input type="tel" class="input" value="090-1234-5678"></div>
            <div class="form-group"><label class="form-label">åœ°åŸŸãƒ»åŒº</label><select class="input"><option value="nerima" selected>ç·´é¦¬åŒº</option><option value="toshima">è±Šå³¶åŒº</option><option value="itabashi">æ¿æ©‹åŒº</option><option value="kita">åŒ—åŒº</option><option value="bunkyo">æ–‡äº¬åŒº</option></select></div>
            <button class="btn btn-primary w-full mt-4" onclick="closeProfileModal('basic-info'); showConfirmation('ä¿å­˜ã—ã¾ã—ãŸ');">ä¿å­˜ã™ã‚‹</button>
        </div>
    </div>

    <div id="modal-support-preferences" class="modal-fullscreen">
        <div class="modal-header">
            <button class="modal-back-btn" onclick="closeProfileModal('support-preferences')"><svg class="w-5 h-5 text-warm-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button>
            <h2 class="modal-title">æä¾›ã§ãã‚‹ã‚µãƒãƒ¼ãƒˆ</h2>
        </div>
        <div class="modal-content">
            <p class="text-sm text-warm-600 mb-4">ã‚ãªãŸãŒæä¾›ã§ãã‚‹ã‚µãƒãƒ¼ãƒˆã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚è¤‡æ•°é¸æŠå¯èƒ½ã§ã™ã€‚</p>
            <div class="form-group"><label class="form-label">ã‚µãƒãƒ¼ãƒˆã‚«ãƒ†ã‚´ãƒª</label>
                <div class="chip-grid">
                    <div class="chip selected" onclick="toggleChip(this)">ğŸ‘¶ è‚²å…ã‚µãƒãƒ¼ãƒˆ</div>
                    <div class="chip" onclick="toggleChip(this)">ğŸš— é€è¿ãƒ»ãƒ©ã‚¤ãƒ‰ã‚·ã‚§ã‚¢</div>
                    <div class="chip selected" onclick="toggleChip(this)">ğŸ›’ è²·ã„ç‰©ä»£è¡Œ</div>
                    <div class="chip" onclick="toggleChip(this)">ğŸ“¦ é…é”ã‚µãƒãƒ¼ãƒˆ</div>
                    <div class="chip" onclick="toggleChip(this)">ğŸ  å®¶äº‹ã‚µãƒãƒ¼ãƒˆ</div>
                    <div class="chip selected" onclick="toggleChip(this)">ğŸ“š å­¦ç¿’æ”¯æ´</div>
                    <div class="chip" onclick="toggleChip(this)">ğŸ• ãƒšãƒƒãƒˆã‚±ã‚¢</div>
                    <div class="chip" onclick="toggleChip(this)">ğŸ‘´ é«˜é½¢è€…æ”¯æ´</div>
                </div>
            </div>
            <div class="form-group"><label class="form-label">ã‚µãƒãƒ¼ãƒˆã®è©³ç´°ï¼ˆä»»æ„ï¼‰</label><textarea class="input" rows="3" placeholder="ä¾‹ï¼šå°å­¦ç”Ÿã®ç®—æ•°ãƒ»å›½èªã®å®¿é¡Œã‚’è¦‹ã‚Œã¾ã™ã€‚">å°å­¦ç”Ÿã®ç®—æ•°ãƒ»å›½èªã®å®¿é¡Œã‚’è¦‹ã‚Œã¾ã™ã€‚2æ­³ã€œ5æ­³ã®ãŠå­æ§˜ã®ãŠä¸–è©±çµŒé¨“ãŒã‚ã‚Šã¾ã™ã€‚</textarea></div>
            <div class="form-group"><label class="form-label">å¯¾å¿œå¯èƒ½ãªæ™‚é–“å¸¯</label>
                <div class="card p-4">
                    <div class="schedule-grid">
                        <div class="schedule-header"></div><div class="schedule-header">åˆå‰</div><div class="schedule-header">åˆå¾Œ</div><div class="schedule-header">å¤œ</div>
                        <div class="schedule-day">æœˆ</div><div class="schedule-cell" onclick="toggleSchedule(this)"></div><div class="schedule-cell selected" onclick="toggleSchedule(this)">âœ“</div><div class="schedule-cell" onclick="toggleSchedule(this)"></div>
                        <div class="schedule-day">ç«</div><div class="schedule-cell" onclick="toggleSchedule(this)"></div><div class="schedule-cell selected" onclick="toggleSchedule(this)">âœ“</div><div class="schedule-cell" onclick="toggleSchedule(this)"></div>
                        <div class="schedule-day">æ°´</div><div class="schedule-cell selected" onclick="toggleSchedule(this)">âœ“</div><div class="schedule-cell selected" onclick="toggleSchedule(this)">âœ“</div><div class="schedule-cell" onclick="toggleSchedule(this)"></div>
                        <div class="schedule-day">æœ¨</div><div class="schedule-cell" onclick="toggleSchedule(this)"></div><div class="schedule-cell" onclick="toggleSchedule(this)"></div><div class="schedule-cell" onclick="toggleSchedule(this)"></div>
                        <div class="schedule-day">é‡‘</div><div class="schedule-cell" onclick="toggleSchedule(this)"></div><div class="schedule-cell selected" onclick="toggleSchedule(this)">âœ“</div><div class="schedule-cell selected" onclick="toggleSchedule(this)">âœ“</div>
                        <div class="schedule-day">åœŸ</div><div class="schedule-cell selected" onclick="toggleSchedule(this)">âœ“</div><div class="schedule-cell selected" onclick="toggleSchedule(this)">âœ“</div><div class="schedule-cell" onclick="toggleSchedule(this)"></div>
                        <div class="schedule-day">æ—¥</div><div class="schedule-cell selected" onclick="toggleSchedule(this)">âœ“</div><div class="schedule-cell" onclick="toggleSchedule(this)"></div><div class="schedule-cell" onclick="toggleSchedule(this)"></div>
                    </div>
                </div>
                <p class="form-hint">åˆå‰: 9:00-12:00 / åˆå¾Œ: 12:00-18:00 / å¤œ: 18:00-21:00</p>
            </div>
            <button class="btn btn-primary w-full mt-4" onclick="closeProfileModal('support-preferences'); showConfirmation('ä¿å­˜ã—ã¾ã—ãŸ');">ä¿å­˜ã™ã‚‹</button>
        </div>
    </div>

    <div id="modal-support-needed" class="modal-fullscreen">
        <div class="modal-header">
            <button class="modal-back-btn" onclick="closeProfileModal('support-needed')"><svg class="w-5 h-5 text-warm-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button>
            <h2 class="modal-title">å¿…è¦ãªã‚µãƒãƒ¼ãƒˆ</h2>
        </div>
        <div class="modal-content">
            <p class="text-sm text-warm-600 mb-4">ã‚µãƒãƒ¼ãƒˆã‚’å—ã‘ãŸã„ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚</p>
            <div class="form-group"><label class="form-label">å¸Œæœ›ã™ã‚‹ã‚µãƒãƒ¼ãƒˆ</label>
                <div class="chip-grid">
                    <div class="chip" onclick="toggleChip(this)">ğŸ‘¶ è‚²å…ã‚µãƒãƒ¼ãƒˆ</div>
                    <div class="chip selected" onclick="toggleChip(this)">ğŸš— é€è¿ãƒ»ãƒ©ã‚¤ãƒ‰ã‚·ã‚§ã‚¢</div>
                    <div class="chip" onclick="toggleChip(this)">ğŸ›’ è²·ã„ç‰©ä»£è¡Œ</div>
                    <div class="chip" onclick="toggleChip(this)">ğŸ“¦ é…é”ã‚µãƒãƒ¼ãƒˆ</div>
                    <div class="chip" onclick="toggleChip(this)">ğŸ  å®¶äº‹ã‚µãƒãƒ¼ãƒˆ</div>
                    <div class="chip" onclick="toggleChip(this)">ğŸ“š å­¦ç¿’æ”¯æ´</div>
                    <div class="chip" onclick="toggleChip(this)">ğŸ• ãƒšãƒƒãƒˆã‚±ã‚¢</div>
                    <div class="chip selected" onclick="toggleChip(this)">ğŸ‘´ é«˜é½¢è€…æ”¯æ´</div>
                </div>
            </div>
            <div class="form-group"><label class="form-label">è©³ç´°ãªå¸Œæœ›ï¼ˆä»»æ„ï¼‰</label><textarea class="input" rows="3" placeholder="ä¾‹ï¼šé€±ã«2å›ç¨‹åº¦ã€ç—…é™¢ã¸ã®é€è¿ã‚’ãŠé¡˜ã„ã—ãŸã„ã§ã™ã€‚">æ¯ã®é€šé™¢ã®é€è¿ã‚’é€±2å›ãŠé¡˜ã„ã—ãŸã„ã§ã™ã€‚ç·´é¦¬åŒºå†…ã®ç—…é™¢ã¸ã®å¾€å¾©ã«ãªã‚Šã¾ã™ã€‚</textarea></div>
            <button class="btn btn-primary w-full mt-4" onclick="closeProfileModal('support-needed'); showConfirmation('ä¿å­˜ã—ã¾ã—ãŸ');">ä¿å­˜ã™ã‚‹</button>
        </div>
    </div>

    <div id="modal-availability" class="modal-fullscreen">
        <div class="modal-header">
            <button class="modal-back-btn" onclick="closeProfileModal('availability')"><svg class="w-5 h-5 text-warm-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button>
            <h2 class="modal-title">å¯¾å¿œå¯èƒ½ãªæ™‚é–“</h2>
        </div>
        <div class="modal-content">
            <p class="text-sm text-warm-600 mb-4">ã‚µãƒãƒ¼ãƒˆã‚’æä¾›ã§ãã‚‹æ›œæ—¥ã¨æ™‚é–“å¸¯ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚</p>
            <div class="form-group"><label class="form-label">é€±é–“ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</label>
                <div class="card p-4">
                    <div class="schedule-grid">
                        <div class="schedule-header"></div><div class="schedule-header">åˆå‰</div><div class="schedule-header">åˆå¾Œ</div><div class="schedule-header">å¤œ</div>
                        <div class="schedule-day">æœˆæ›œ</div><div class="schedule-cell" onclick="toggleSchedule(this)"></div><div class="schedule-cell selected" onclick="toggleSchedule(this)">âœ“</div><div class="schedule-cell" onclick="toggleSchedule(this)"></div>
                        <div class="schedule-day">ç«æ›œ</div><div class="schedule-cell" onclick="toggleSchedule(this)"></div><div class="schedule-cell selected" onclick="toggleSchedule(this)">âœ“</div><div class="schedule-cell" onclick="toggleSchedule(this)"></div>
                        <div class="schedule-day">æ°´æ›œ</div><div class="schedule-cell selected" onclick="toggleSchedule(this)">âœ“</div><div class="schedule-cell selected" onclick="toggleSchedule(this)">âœ“</div><div class="schedule-cell" onclick="toggleSchedule(this)"></div>
                        <div class="schedule-day">æœ¨æ›œ</div><div class="schedule-cell" onclick="toggleSchedule(this)"></div><div class="schedule-cell" onclick="toggleSchedule(this)"></div><div class="schedule-cell" onclick="toggleSchedule(this)"></div>
                        <div class="schedule-day">é‡‘æ›œ</div><div class="schedule-cell" onclick="toggleSchedule(this)"></div><div class="schedule-cell selected" onclick="toggleSchedule(this)">âœ“</div><div class="schedule-cell selected" onclick="toggleSchedule(this)">âœ“</div>
                        <div class="schedule-day">åœŸæ›œ</div><div class="schedule-cell selected" onclick="toggleSchedule(this)">âœ“</div><div class="schedule-cell selected" onclick="toggleSchedule(this)">âœ“</div><div class="schedule-cell" onclick="toggleSchedule(this)"></div>
                        <div class="schedule-day">æ—¥æ›œ</div><div class="schedule-cell selected" onclick="toggleSchedule(this)">âœ“</div><div class="schedule-cell" onclick="toggleSchedule(this)"></div><div class="schedule-cell" onclick="toggleSchedule(this)"></div>
                    </div>
                </div>
            </div>
            <div class="form-group"><label class="form-label">ä¼‘æš‡ãƒ»ä¸åœ¨æœŸé–“</label><input type="text" class="input" placeholder="ä¾‹ï¼š12/28ã€œ1/4ã¯ä¸åœ¨ã§ã™"></div>
            <button class="btn btn-primary w-full mt-4" onclick="closeProfileModal('availability'); showConfirmation('ä¿å­˜ã—ã¾ã—ãŸ');">ä¿å­˜ã™ã‚‹</button>
        </div>
    </div>

    <div id="modal-privacy" class="modal-fullscreen">
        <div class="modal-header">
            <button class="modal-back-btn" onclick="closeProfileModal('privacy')"><svg class="w-5 h-5 text-warm-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button>
            <h2 class="modal-title">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼è¨­å®š</h2>
        </div>
        <div class="modal-content">
            <p class="text-sm text-warm-600 mb-4">ã‚ãªãŸã®æƒ…å ±ã®å…¬é–‹ç¯„å›²ã‚’è¨­å®šã§ãã¾ã™ã€‚</p>
            <div class="form-group"><label class="form-label">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã®å…¬é–‹ç¯„å›²</label><select class="input"><option value="all">ã™ã¹ã¦ã®ä¼šå“¡ã«å…¬é–‹</option><option value="verified" selected>èªè¨¼æ¸ˆã¿ä¼šå“¡ã®ã¿</option><option value="hidden">éå…¬é–‹</option></select></div>
            <div class="form-group"><label class="form-label">è¡¨ç¤ºåã®è¨­å®š</label>
                <div class="space-y-2">
                    <div class="toggle-container"><div><p class="toggle-label">æœ¬åã‚’è¡¨ç¤º</p><p class="toggle-desc">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã«æœ¬åã‚’è¡¨ç¤ºã—ã¾ã™</p></div><div class="toggle" onclick="toggleSwitch(this)"></div></div>
                    <div class="toggle-container"><div><p class="toggle-label">ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã‚’ä½¿ç”¨</p><p class="toggle-desc">æœ¬åã®ä»£ã‚ã‚Šã«ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã‚’è¡¨ç¤º</p></div><div class="toggle active" onclick="toggleSwitch(this)"></div></div>
                </div>
            </div>
            <div class="form-group"><label class="form-label">ä½ç½®æƒ…å ±ã®ç²¾åº¦</label><select class="input"><option value="exact">è©³ç´°ãªä½æ‰€</option><option value="district" selected>åŒºã®ã¿è¡¨ç¤º</option><option value="hidden">éè¡¨ç¤º</option></select></div>
            <div class="form-group"><label class="form-label">é€£çµ¡æ–¹æ³•ã®è¨­å®š</label><select class="input"><option value="inapp" selected>ã‚¢ãƒ—ãƒªå†…ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã¿</option><option value="email">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¬é–‹</option><option value="phone">é›»è©±ç•ªå·ã‚’å…¬é–‹</option></select></div>
            <button class="btn btn-primary w-full mt-4" onclick="closeProfileModal('privacy'); showConfirmation('ä¿å­˜ã—ã¾ã—ãŸ');">ä¿å­˜ã™ã‚‹</button>
        </div>
    </div>

    <div id="modal-activity" class="modal-fullscreen">
        <div class="modal-header">
            <button class="modal-back-btn" onclick="closeProfileModal('activity')"><svg class="w-5 h-5 text-warm-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></button>
            <h2 class="modal-title">æ´»å‹•å±¥æ­´</h2>
        </div>
        <div class="modal-content">
            <div class="grid grid-cols-3 gap-3 mb-6">
                <div class="stat-card text-center"><p class="stat-value text-xl text-brand-600">12</p><p class="stat-label text-xs">æä¾›ã—ãŸ</p></div>
                <div class="stat-card teal text-center"><p class="stat-value text-xl text-volunteer-600">8</p><p class="stat-label text-xs">å—ã‘ãŸ</p></div>
                <div class="stat-card text-center"><p class="stat-value text-xl text-yellow-600">1,250</p><p class="stat-label text-xs">ãƒã‚¤ãƒ³ãƒˆ</p></div>
            </div>
            <h3 class="font-bold text-warm-800 mb-3">æœ€è¿‘ã®æ´»å‹•</h3>
            <div class="activity-item"><p class="activity-date">2024å¹´12æœˆ8æ—¥</p><p class="activity-title">ãƒ™ãƒ“ãƒ¼ã‚·ãƒƒã‚¿ãƒ¼ï¼ˆ2æ™‚é–“ï¼‰</p><p class="activity-desc">ä½è—¤ã•ã‚“ã®ãŠå­æ§˜ã‚’ãŠé ã‹ã‚Šã—ã¾ã—ãŸ</p><span class="activity-badge provided">ã‚µãƒãƒ¼ãƒˆæä¾›</span></div>
            <div class="activity-item"><p class="activity-date">2024å¹´12æœˆ5æ—¥</p><p class="activity-title">è²·ã„ç‰©ä»£è¡Œ</p><p class="activity-desc">ã‚¹ãƒ¼ãƒ‘ãƒ¼ã§ã®è²·ã„ç‰©ã‚’ãŠæ‰‹ä¼ã„ã—ã¾ã—ãŸ</p><span class="activity-badge provided">ã‚µãƒãƒ¼ãƒˆæä¾›</span></div>
            <div class="activity-item"><p class="activity-date">2024å¹´12æœˆ1æ—¥</p><p class="activity-title">ç—…é™¢ã¸ã®é€è¿</p><p class="activity-desc">å±±ç”°ã•ã‚“ã«ç—…é™¢ã¾ã§é€ã£ã¦ã„ãŸã ãã¾ã—ãŸ</p><span class="activity-badge received">ã‚µãƒãƒ¼ãƒˆå—é ˜</span></div>
            <div class="activity-item"><p class="activity-date">2024å¹´11æœˆ28æ—¥</p><p class="activity-title">å®¿é¡Œã‚µãƒãƒ¼ãƒˆ</p><p class="activity-desc">å°å­¦3å¹´ç”Ÿã®ç®—æ•°ã‚’æ•™ãˆã¾ã—ãŸ</p><span class="activity-badge provided">ã‚µãƒãƒ¼ãƒˆæä¾›</span></div>
        </div>
    </div>

    <!-- ========================================
         REQUEST MODAL
         ======================================== -->
    <div id="request-modal" class="modal-overlay" onclick="hideModal('request-modal')">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="p-6">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-xl font-bold text-warm-800">åŠ©ã‘åˆã„æŠ•ç¨¿</h3>
                    <button onclick="hideModal('request-modal')" class="w-10 h-10 rounded-full bg-warm-100 flex items-center justify-center"><svg class="w-5 h-5 text-warm-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
                </div>
                <div class="space-y-4">
                    <div><label class="block text-sm font-medium text-warm-700 mb-2">ç¨®é¡</label><div class="flex space-x-2"><button class="flex-1 btn btn-primary py-3">åŠ©ã‘ã‚’æ±‚ã‚ã‚‹</button><button class="flex-1 btn btn-secondary py-3">åŠ©ã‘ã‚’æä¾›</button></div></div>
                    <div><label class="block text-sm font-medium text-warm-700 mb-2">ã‚«ãƒ†ã‚´ãƒªãƒ¼</label><select class="input"><option>é¸æŠã—ã¦ãã ã•ã„</option><option>ğŸ‘¶ è‚²å…ã‚µãƒãƒ¼ãƒˆ</option><option>ğŸš— é€è¿ãƒ»ãƒ©ã‚¤ãƒ‰ã‚·ã‚§ã‚¢</option><option>ğŸ›’ è²·ã„ç‰©ä»£è¡Œ</option><option>ğŸ“¦ é…é”ã‚µãƒãƒ¼ãƒˆ</option></select></div>
                    <div><label class="block text-sm font-medium text-warm-700 mb-2">ã‚¿ã‚¤ãƒˆãƒ«</label><input type="text" class="input" placeholder="ä¾‹ï¼š12æœˆ15æ—¥ã®ãƒ™ãƒ“ãƒ¼ã‚·ãƒƒã‚¿ãƒ¼"></div>
                    <div><label class="block text-sm font-medium text-warm-700 mb-2">è©³ç´°</label><textarea class="input" rows="4" placeholder="è©³ã—ã„å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„..."></textarea></div>
                </div>
                <div class="mt-6 flex space-x-3">
                    <button class="flex-1 btn btn-secondary" onclick="hideModal('request-modal')">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                    <button class="flex-1 btn btn-primary" onclick="hideModal('request-modal'); showConfirmation('æŠ•ç¨¿ã—ã¾ã—ãŸ');">æŠ•ç¨¿ã™ã‚‹</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ========================================
         PROPOSAL MODAL
         ======================================== -->
    <div id="proposal-modal" class="modal-overlay" onclick="hideModal('proposal-modal')">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="p-6">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-xl font-bold text-warm-800">æ–°è¦ææ¡ˆ</h3>
                    <button onclick="hideModal('proposal-modal')" class="w-10 h-10 rounded-full bg-warm-100 flex items-center justify-center"><svg class="w-5 h-5 text-warm-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
                </div>
                <div class="space-y-4">
                    <div><label class="block text-sm font-medium text-warm-700 mb-2">ã‚«ãƒ†ã‚´ãƒªãƒ¼</label><select class="input"><option>æ–¹é‡ãƒ»ãƒãƒªã‚·ãƒ¼</option><option>äºˆç®—</option><option>ã‚¤ãƒ™ãƒ³ãƒˆ</option><option>ãã®ä»–</option></select></div>
                    <div><label class="block text-sm font-medium text-warm-700 mb-2">ã‚¿ã‚¤ãƒˆãƒ«</label><input type="text" class="input" placeholder="ææ¡ˆã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›..."></div>
                    <div><label class="block text-sm font-medium text-warm-700 mb-2">è©³ç´°èª¬æ˜</label><textarea class="input" rows="4" placeholder="ææ¡ˆã®è©³ç´°ã‚’èª¬æ˜ã—ã¦ãã ã•ã„..."></textarea></div>
                    <div><label class="block text-sm font-medium text-warm-700 mb-2">æŠ•ç¥¨æœŸé™</label><input type="date" class="input"></div>
                </div>
                <div class="mt-6 flex space-x-3">
                    <button class="flex-1 btn btn-secondary" onclick="hideModal('proposal-modal')">ä¸‹æ›¸ãä¿å­˜</button>
                    <button class="flex-1 btn btn-primary" onclick="hideModal('proposal-modal'); showConfirmation('ææ¡ˆã‚’å…¬é–‹ã—ã¾ã—ãŸ');">å…¬é–‹ã™ã‚‹</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ========================================
         CONFIRMATION TOAST
         ======================================== -->
    <div id="confirmation-toast" class="fixed top-4 left-4 right-4 text-white p-4 rounded-xl shadow-lg transform -translate-y-full opacity-0 transition-all duration-300" style="z-index: 400;">
        <div class="flex items-center space-x-3">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
            <span id="confirmation-message">å®Œäº†ã—ã¾ã—ãŸ</span>
        </div>
    </div>

    <!-- ========================================
         JAVASCRIPT
         ======================================== -->
    <script>
        const App = {
            state: { isLoggedIn: false, currentView: 'dashboard', userRole: null, selectedRole: null },
            users: {
                reijikai: { name: 'ç”°ä¸­ èŠ±å­', memberNumber: 'NT-12345', avatar: 'ç”°' },
                shokuin: { name: 'éˆ´æœ¨ å¤ªéƒ', memberNumber: 'NT-00123', avatar: 'éˆ´' },
                volunteer: { name: 'å±±ç”° ç¾å’²', memberNumber: 'NT-54321', avatar: 'å±±' }
            },
            roleBadges: {
                reijikai: { text: 'å§”å“¡ä¼š', class: 'badge-reijikai' },
                shokuin: { text: 'è·å“¡', class: 'badge-shokuin' },
                volunteer: { text: 'ãƒœãƒ©ãƒ³ãƒ†ã‚£ã‚¢', class: 'badge-volunteer' }
            }
        };

        function selectRole(role) {
            App.state.selectedRole = role;
            document.querySelectorAll('.role-card-compact').forEach(card => card.classList.remove('selected'));
            document.querySelector(`.role-card-compact[data-role="${role}"]`)?.classList.add('selected');
            document.getElementById('login-btn').disabled = false;
        }

        function login() {
            if (!App.state.selectedRole) return;
            App.state.isLoggedIn = true;
            App.state.userRole = App.state.selectedRole;
            document.body.setAttribute('data-role', App.state.userRole);
            
            const user = App.users[App.state.userRole];
            const badge = App.roleBadges[App.state.userRole];
            
            document.getElementById('header-role-badge').textContent = badge.text;
            document.getElementById('avatar-initial').textContent = user.avatar;
            document.getElementById('welcome-name').textContent = user.name + 'ã•ã‚“';
            
            const dashboardBadge = document.getElementById('dashboard-role-badge');
            dashboardBadge.textContent = badge.text;
            dashboardBadge.className = 'badge ' + badge.class;
            
            document.getElementById('profile-avatar').textContent = user.avatar;
            document.getElementById('profile-name').textContent = user.name;
            document.getElementById('profile-member-number').textContent = user.memberNumber;
            const profileBadge = document.getElementById('profile-role-badge');
            profileBadge.textContent = badge.text;
            profileBadge.className = 'badge ' + badge.class;
            
            document.getElementById('view-login').classList.remove('active');
            document.getElementById('app-container').style.display = 'block';
            document.getElementById('view-dashboard').classList.add('active');
        }

        function logout() {
            App.state.isLoggedIn = false;
            App.state.userRole = null;
            App.state.selectedRole = null;
            document.body.removeAttribute('data-role');
            document.querySelectorAll('.role-card-compact').forEach(card => card.classList.remove('selected'));
            document.getElementById('login-btn').disabled = true;
            document.getElementById('more-menu-overlay').classList.remove('active');
            document.getElementById('app-container').style.display = 'none';
            document.querySelectorAll('.view').forEach(view => view.classList.remove('active'));
            document.getElementById('view-login').classList.add('active');
        }

        function navigate(viewName) {
            App.state.currentView = viewName;
            document.querySelectorAll('#app-container .view').forEach(view => view.classList.remove('active'));
            document.getElementById('view-' + viewName)?.classList.add('active');
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
                if (item.dataset.view === viewName) item.classList.add('active');
            });
            window.scrollTo(0, 0);
        }

        function toggleMoreMenu() {
            const overlay = document.getElementById('more-menu-overlay');
            overlay.classList.toggle('active');
            document.body.style.overflow = overlay.classList.contains('active') ? 'hidden' : '';
        }

        function switchCommunityTab(btn, tabName) {
            document.querySelectorAll('#view-community .tab').forEach(tab => tab.classList.remove('active'));
            btn.classList.add('active');
            document.getElementById('community-requests').style.display = tabName === 'requests' ? 'block' : 'none';
            document.getElementById('community-offers').style.display = tabName === 'offers' ? 'block' : 'none';
            document.getElementById('community-my').style.display = tabName === 'my' ? 'block' : 'none';
        }

        function filterNews(btn, category) {
            document.querySelectorAll('.filter-pill').forEach(pill => pill.classList.remove('active'));
            btn.classList.add('active');
            const newsCards = document.querySelectorAll('#news-list .news-card');
            let visibleCount = 0;
            newsCards.forEach(card => {
                const cardCategory = card.getAttribute('data-category');
                if (category === 'all' || cardCategory === category) {
                    card.style.display = 'block';
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                }
            });
            const emptyState = document.getElementById('news-empty');
            emptyState.style.display = visibleCount === 0 ? 'block' : 'none';
        }

        function switchDecisionTab(btn, tabName) {
            document.querySelectorAll('#view-decisions .tab').forEach(tab => tab.classList.remove('active'));
            btn.classList.add('active');
            document.getElementById('decisions-active').style.display = tabName === 'active' ? 'block' : 'none';
            document.getElementById('decisions-completed').style.display = tabName === 'completed' ? 'block' : 'none';
            document.getElementById('decisions-my').style.display = tabName === 'my' ? 'block' : 'none';
        }

        const voteState = { 1: null, 2: 'yes', 3: null };

        function castVote(proposalId, vote) {
            voteState[proposalId] = vote;
            document.getElementById(`proposal-${proposalId}-voting`).classList.add('hidden');
            document.getElementById(`proposal-${proposalId}-voted`).classList.remove('hidden');
            const voteTexts = { yes: 'è³›æˆ', no: 'åå¯¾', abstain: 'æ£„æ¨©' };
            document.getElementById(`proposal-${proposalId}-vote-text`).textContent = `${voteTexts[vote]}ã§æŠ•ç¥¨æ¸ˆã¿`;
            const progressEl = document.getElementById(`proposal-${proposalId}-progress`);
            const barEl = document.getElementById(`proposal-${proposalId}-bar`);
            if (proposalId === 1) { progressEl.textContent = '25/30 (83%)'; barEl.style.width = '83%'; }
            else if (proposalId === 3) { progressEl.textContent = '29/30 (97%)'; barEl.style.width = '97%'; }
            showConfirmation(`${voteTexts[vote]}ã§æŠ•ç¥¨ã—ã¾ã—ãŸ`);
        }

        function changeVote(proposalId) {
            document.getElementById(`proposal-${proposalId}-voting`).classList.remove('hidden');
            document.getElementById(`proposal-${proposalId}-voted`).classList.add('hidden');
            voteState[proposalId] = null;
        }

        function openProfileModal(modalName) {
            document.getElementById('modal-' + modalName).classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeProfileModal(modalName) {
            document.getElementById('modal-' + modalName).classList.remove('active');
            document.body.style.overflow = '';
        }

        function showModal(modalId) {
            document.getElementById(modalId).classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function hideModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
            document.body.style.overflow = '';
        }

        function toggleChip(chip) { chip.classList.toggle('selected'); }
        function toggleSwitch(toggle) { toggle.classList.toggle('active'); }
        function toggleSchedule(cell) {
            cell.classList.toggle('selected');
            cell.textContent = cell.classList.contains('selected') ? 'âœ“' : '';
        }

        function showConfirmation(message) {
            const toast = document.getElementById('confirmation-toast');
            document.getElementById('confirmation-message').textContent = message;
            toast.style.transform = 'translateY(0)';
            toast.style.opacity = '1';
            setTimeout(() => {
                toast.style.transform = 'translateY(-100%)';
                toast.style.opacity = '0';
            }, 3000);
        }
    </script>
</body>
</html>