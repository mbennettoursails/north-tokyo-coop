<!--
  Card Components
  
  This file contains reusable card templates for various content types.
  Each card is designed to be included in page templates using Alpine.js.
  
  Available Card Types:
  1. News Card - Article preview cards
  2. Event Card - Event listing cards
  3. Community Request Card - Mutual aid request/offer cards
  4. Knowledge Card - Knowledge base article cards
  5. Proposal Card - Decision/voting proposal cards
  6. Stat Card - Dashboard statistics cards
  7. Quick Action Card - Dashboard action buttons
  8. Profile Card - User profile display
-->

<!-- ============================================
     NEWS CARD
     ============================================ -->
<!--
  Usage:
  <template x-for="article in newsArticles" :key="article.id">
    <div x-html="getNewsCardTemplate(article)"></div>
  </template>
-->

<template id="news-card-template">
    <div class="news-card card-interactive" @click="selectArticle(article)">
        <div class="flex items-start">
            <div class="flex-1 min-w-0">
                <!-- Category & Pinned Badge -->
                <div class="flex items-center space-x-2 mb-2">
                    <span class="badge badge-category" x-text="article.displayCategory"></span>
                    <span x-show="article.pinned" class="badge badge-pinned">üìå</span>
                </div>
                
                <!-- Title -->
                <h3 class="card-title mb-2" x-text="article.displayTitle"></h3>
                
                <!-- Excerpt -->
                <p class="card-excerpt line-clamp-2" x-text="article.displayExcerpt"></p>
                
                <!-- Meta -->
                <div class="card-meta mt-3">
                    <span x-text="article.displayAuthor"></span>
                    <span class="mx-2">‚Ä¢</span>
                    <span x-text="formatShortDate(article.date)"></span>
                    <span class="mx-2">‚Ä¢</span>
                    <span class="inline-flex items-center">
                        <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                        </svg>
                        <span x-text="article.views"></span>
                    </span>
                </div>
            </div>
            
            <!-- Arrow -->
            <svg class="w-5 h-5 text-gray-400 ml-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
        </div>
    </div>
</template>


<!-- ============================================
     EVENT CARD
     ============================================ -->
<template id="event-card-template">
    <div class="event-card card-interactive" @click="selectEvent(event)">
        <div class="flex items-start">
            <!-- Date Badge -->
            <div class="event-date-badge mr-4 flex-shrink-0">
                <span class="month" x-text="formatMonth(event.date)"></span>
                <span class="day" x-text="formatDay(event.date)"></span>
            </div>
            
            <div class="flex-1 min-w-0">
                <!-- Badges -->
                <div class="flex items-center space-x-2 mb-2">
                    <span class="badge badge-category" x-text="event.displayCategory"></span>
                    <span x-show="event.featured" class="badge badge-featured">‚≠ê</span>
                    <span x-show="event.roleRestricted" class="badge badge-restricted">üîí</span>
                </div>
                
                <!-- Title -->
                <h3 class="card-title mb-1" x-text="event.displayTitle"></h3>
                
                <!-- Location -->
                <p class="text-sm text-gray-600" x-text="event.displayLocation"></p>
                
                <!-- Meta -->
                <div class="card-meta mt-2">
                    <span x-text="event.time"></span>
                    <span class="mx-2">‚Ä¢</span>
                    <span x-text="event.fee === 0 ? t.common.free : '¬•' + event.fee.toLocaleString()"></span>
                    <span class="mx-2">‚Ä¢</span>
                    <span :class="event.isFull ? 'text-red-500' : 'text-green-500'" 
                          x-text="event.isFull ? t.events.full : event.spotsRemaining + ' ' + t.events.spotsLeft">
                    </span>
                </div>
            </div>
            
            <!-- Arrow -->
            <svg class="w-5 h-5 text-gray-400 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
        </div>
    </div>
</template>


<!-- ============================================
     COMMUNITY REQUEST CARD
     ============================================ -->
<template id="request-card-template">
    <div class="request-card card-interactive" 
         :class="'type-' + request.type + (request.urgency === 'urgent' ? ' urgency-urgent' : '')"
         @click="showRequestDetail(request)">
        
        <!-- Header -->
        <div class="flex items-start justify-between mb-3">
            <div class="flex items-center space-x-2">
                <span class="text-xl" x-text="request.categoryInfo?.icon"></span>
                <span class="badge" :class="getCategoryBadgeClass(request.categoryInfo?.color)" 
                      x-text="request.categoryInfo?.displayName">
                </span>
            </div>
            <div class="flex items-center space-x-2">
                <span class="badge" :class="getTypeBadgeClass(request.type)" 
                      x-text="t.community.requestTypes[request.type]">
                </span>
                <span x-show="request.urgency === 'urgent'" class="badge badge-urgent">üî¥</span>
                <span x-show="request.urgency === 'soon'" class="badge badge-soon">üü°</span>
            </div>
        </div>
        
        <!-- Title & Description -->
        <h3 class="card-title mb-2" x-text="request.displayTitle"></h3>
        <p class="card-excerpt line-clamp-2 mb-3" x-text="request.displayDescription"></p>
        
        <!-- Footer -->
        <div class="card-meta flex items-center justify-between">
            <div class="flex items-center space-x-3">
                <span x-text="request.displayArea"></span>
                <span>‚Ä¢</span>
                <span x-text="request.userName"></span>
            </div>
            <div class="flex items-center space-x-3">
                <span class="inline-flex items-center">
                    <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    </svg>
                    <span x-text="request.views"></span>
                </span>
                <span class="inline-flex items-center">
                    <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                    </svg>
                    <span x-text="request.responses"></span>
                </span>
                <span x-text="formatTimeAgo(request.createdAt)"></span>
            </div>
        </div>
    </div>
</template>


<!-- ============================================
     KNOWLEDGE CARD
     ============================================ -->
<template id="knowledge-card-template">
    <div class="knowledge-card card-interactive" @click="selectArticle(article)">
        <div class="flex items-start">
            <!-- Category Icon -->
            <span class="text-2xl mr-3 flex-shrink-0" x-text="article.categoryInfo?.icon"></span>
            
            <div class="flex-1 min-w-0">
                <!-- Title -->
                <h3 class="card-title mb-1" x-text="article.displayTitle"></h3>
                
                <!-- Preview -->
                <p class="card-excerpt line-clamp-2 mb-2" x-text="article.displayContent.substring(0, 100) + '...'"></p>
                
                <!-- Meta -->
                <div class="card-meta">
                    <span class="badge badge-small" x-text="article.categoryInfo?.displayName"></span>
                    <span class="mx-2">‚Ä¢</span>
                    <span class="inline-flex items-center">
                        <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                        </svg>
                        <span x-text="article.views"></span>
                    </span>
                    <span class="mx-2">‚Ä¢</span>
                    <span class="inline-flex items-center text-green-500">
                        <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6z"></path>
                        </svg>
                        <span x-text="article.helpful"></span>
                    </span>
                </div>
            </div>
            
            <!-- Arrow -->
            <svg class="w-5 h-5 text-gray-400 flex-shrink-0 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
        </div>
    </div>
</template>


<!-- ============================================
     PROPOSAL CARD
     ============================================ -->
<template id="proposal-card-template">
    <div class="proposal-card">
        <!-- Header -->
        <div class="flex items-start justify-between mb-3">
            <div class="flex-1">
                <div class="flex items-center space-x-2 mb-2">
                    <span class="badge" :class="getStatusBadgeClass(proposal.status)" x-text="proposal.displayStatus"></span>
                    <span class="badge badge-category" x-text="proposal.displayCategory"></span>
                </div>
                <h4 class="card-title mb-1" x-text="proposal.displayTitle"></h4>
                <p class="card-excerpt line-clamp-2" x-text="proposal.displayDescription"></p>
            </div>
        </div>
        
        <!-- Vote Progress Bar -->
        <div class="vote-progress mb-4">
            <div class="vote-bar">
                <div class="vote-bar-yes" :style="'width: ' + proposal.yesPercentage + '%'"></div>
                <div class="vote-bar-no" :style="'width: ' + proposal.noPercentage + '%'"></div>
                <div class="vote-bar-abstain" :style="'width: ' + proposal.abstainPercentage + '%'"></div>
            </div>
            <div class="vote-legend">
                <span class="vote-legend-item text-green-600">
                    <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    <span x-text="proposal.votes.yes"></span> <span x-text="t.decisions.vote.yes"></span>
                </span>
                <span class="vote-legend-item text-red-600">
                    <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                    <span x-text="proposal.votes.no"></span> <span x-text="t.decisions.vote.no"></span>
                </span>
                <span class="vote-legend-item text-gray-500">
                    ‚Äî <span x-text="proposal.votes.abstain"></span> <span x-text="t.decisions.vote.abstain"></span>
                </span>
            </div>
        </div>
        
        <!-- Meta -->
        <div class="card-meta flex items-center justify-between mb-4">
            <span class="inline-flex items-center">
                <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                </svg>
                <span x-text="t.decisions.deadline"></span>: <span x-text="formatDate(proposal.deadline)"></span>
            </span>
            <span class="inline-flex items-center">
                <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7"></path>
                </svg>
                <span x-text="proposal.totalVotes + '/' + proposal.totalEligible"></span>
            </span>
        </div>
        
        <!-- Vote Buttons -->
        <div x-show="proposal.status === 'active'" class="vote-buttons">
            <button @click="castVote(proposal.id, 'yes')" class="vote-btn vote-btn-yes">
                <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                </svg>
                <span x-text="t.decisions.vote.yes"></span>
            </button>
            <button @click="castVote(proposal.id, 'no')" class="vote-btn vote-btn-no">
                <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                </svg>
                <span x-text="t.decisions.vote.no"></span>
            </button>
            <button @click="castVote(proposal.id, 'abstain')" class="vote-btn vote-btn-abstain">
                ‚Äî <span x-text="t.decisions.vote.abstain"></span>
            </button>
        </div>
    </div>
</template>


<!-- ============================================
     STAT CARD
     ============================================ -->
<template id="stat-card-template">
    <div class="stat-card">
        <div class="flex items-center justify-between">
            <div>
                <p class="stat-card-label" x-text="label"></p>
                <p class="stat-card-value" x-text="value"></p>
            </div>
            <div class="stat-card-icon" :class="iconBgClass">
                <!-- Icon inserted dynamically -->
            </div>
        </div>
    </div>
</template>


<!-- ============================================
     QUICK ACTION CARD
     ============================================ -->
<template id="quick-action-template">
    <button class="quick-action-btn" :class="gradientClass" @click="action()">
        <div class="quick-action-icon">
            <!-- Icon inserted dynamically -->
        </div>
        <div class="quick-action-content">
            <p class="quick-action-title" x-text="title"></p>
            <p class="quick-action-desc" x-text="description"></p>
        </div>
    </button>
</template>


<!-- ============================================
     CARD STYLES
     ============================================ -->
<style>
/* Base Card Styles */
.card {
    background-color: white;
    border-radius: 0.75rem;
    padding: 1rem;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.card-interactive {
    background-color: white;
    border-radius: 0.75rem;
    padding: 1rem;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
}

.card-interactive:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.card-interactive:active {
    transform: translateY(0);
}

/* Card Typography */
.card-title {
    font-size: 0.9375rem;
    font-weight: 600;
    color: #1f2937;
    line-height: 1.4;
}

.card-excerpt {
    font-size: 0.8125rem;
    color: #6b7280;
    line-height: 1.5;
}

.card-meta {
    font-size: 0.6875rem;
    color: #9ca3af;
    display: flex;
    align-items: center;
    flex-wrap: wrap;
}

/* Badge Styles */
.badge {
    display: inline-block;
    padding: 0.25rem 0.5rem;
    font-size: 0.6875rem;
    font-weight: 500;
    border-radius: 9999px;
}

.badge-small {
    padding: 0.125rem 0.375rem;
    font-size: 0.625rem;
}

.badge-category {
    background-color: #dcfce7;
    color: #166534;
}

.badge-pinned {
    background-color: #fef2f2;
    color: #991b1b;
}

.badge-featured {
    background-color: #fef9c3;
    color: #854d0e;
}

.badge-restricted {
    background-color: #f3e8ff;
    color: #7e22ce;
}

.badge-urgent {
    background-color: #fef2f2;
    color: #991b1b;
}

.badge-soon {
    background-color: #fef9c3;
    color: #854d0e;
}

/* Event Date Badge */
.event-date-badge {
    width: 3rem;
    height: 3.5rem;
    background-color: #f3f4f6;
    border-radius: 0.5rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
}

.event-date-badge .month {
    font-size: 0.625rem;
    font-weight: 500;
    color: #86bd5e;
    text-transform: uppercase;
}

.event-date-badge .day {
    font-size: 1.25rem;
    font-weight: 700;
    color: #1f2937;
    line-height: 1;
}

/* Request Card Types */
.request-card {
    background-color: white;
    border-radius: 0.75rem;
    padding: 1rem;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    border-left: 4px solid transparent;
}

.request-card.type-request {
    border-left-color: #3b82f6;
}

.request-card.type-offer {
    border-left-color: #22c55e;
}

.request-card.type-exchange {
    border-left-color: #8b5cf6;
}

.request-card.urgency-urgent {
    background-color: #fef2f2;
}

/* Stat Card */
.stat-card {
    background-color: white;
    border-radius: 0.75rem;
    padding: 1rem;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.stat-card-label {
    font-size: 0.6875rem;
    color: #6b7280;
    margin-bottom: 0.25rem;
}

.stat-card-value {
    font-size: 1.5rem;
    font-weight: 700;
    color: #1f2937;
}

.stat-card-icon {
    width: 2.5rem;
    height: 2.5rem;
    border-radius: 9999px;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Proposal Card */
.proposal-card {
    background-color: white;
    border-radius: 0.75rem;
    padding: 1rem;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* Vote Bar */
.vote-bar {
    height: 0.5rem;
    background-color: #e5e7eb;
    border-radius: 9999px;
    display: flex;
    overflow: hidden;
    margin-bottom: 0.5rem;
}

.vote-bar-yes {
    background-color: #22c55e;
    transition: width 0.3s;
}

.vote-bar-no {
    background-color: #ef4444;
    transition: width 0.3s;
}

.vote-bar-abstain {
    background-color: #9ca3af;
    transition: width 0.3s;
}

.vote-legend {
    display: flex;
    justify-content: space-between;
    font-size: 0.6875rem;
}

.vote-legend-item {
    display: inline-flex;
    align-items: center;
}

/* Vote Buttons */
.vote-buttons {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
}

.vote-btn {
    padding: 0.5rem;
    border-radius: 0.5rem;
    font-size: 0.75rem;
    font-weight: 500;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.2s;
    border: none;
    cursor: pointer;
}

.vote-btn-yes {
    background-color: #dcfce7;
    color: #166534;
}

.vote-btn-yes:hover {
    background-color: #bbf7d0;
}

.vote-btn-no {
    background-color: #fef2f2;
    color: #991b1b;
}

.vote-btn-no:hover {
    background-color: #fecaca;
}

.vote-btn-abstain {
    background-color: #f3f4f6;
    color: #4b5563;
}

.vote-btn-abstain:hover {
    background-color: #e5e7eb;
}

/* Quick Action Button */
.quick-action-btn {
    width: 100%;
    padding: 1rem;
    border-radius: 0.75rem;
    color: white;
    display: flex;
    align-items: center;
    text-align: left;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    transition: transform 0.2s, box-shadow 0.2s;
    border: none;
    cursor: pointer;
}

.quick-action-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
}

.quick-action-icon {
    margin-right: 0.75rem;
}

.quick-action-icon svg {
    width: 1.5rem;
    height: 1.5rem;
}

.quick-action-title {
    font-weight: 600;
    font-size: 0.875rem;
}

.quick-action-desc {
    font-size: 0.6875rem;
    opacity: 0.8;
}

/* Line Clamp Utilities */
.line-clamp-1 {
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
}
</style>